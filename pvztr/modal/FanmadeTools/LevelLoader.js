'use strict';{function setActiveCopy(...g){g['forEach'](c=>{c['oncopy']=c['oncontextmenu']=c['onselectstart']=c['onmousedown']=function(w){w['stopPropagation']();};});}function PlaceZombieCustom(...g){let c={'oThiefZombie':0x1};return c[g[0x0]['prototype']['EName']]&&(g[0x3]=0x0),PlaceZombie(...g);}let oFlowerBed=InheritO(oObstacle2,{'EName':'oFlowerBed','width':0x64,'height':0x5a,'StaticGif':0x2,'PicArr':['','','images/Props/Terrains/FlowerBed.png'],'CanGrow'(g,c,w){let I=c+'_'+w,Q=this;if(oGd['$LockingGrid'][I])return![];return oGd['$GdType'][c][w]!==0x0?!(w<0x1||w>0x9||g[Q['PKind']])&&(!g[0x1]||g[0x1]['isPlant']):!(Q['UndergroundPlant']&&oGd['$GdType'][c][w]===0x2)&&g[0x0]&&!g[Q['PKind']];},'BirthStyle'(g,c,w,I){return g['zIndex']=0x1,I['z-index']=0x1,EditEle(w,{'id':c,'data-jng-constructor':g['EName']},I,EDPZ);},'Die'(...g){toOver(0x2);}}),oMould=InheritO(oObstacle,{'EName':'oMould','width':0x64,'height':0x5a,'StaticGif':0x2,'PicArr':['','','images/Props/Terrains/Mould.png'],'CanGrow'(g,c,w){let I=c+'_'+w,Q=this;if(oGd['$LockingGrid'][I])return![];return oGd['$GdType'][c][w]!==0x0?!(w<0x1||w>0x9||g[Q['PKind']])&&(!g[0x1]||g[0x1]['isPlant']):!(Q['UndergroundPlant']&&oGd['$GdType'][c][w]===0x2)&&g[0x0]&&!g[Q['PKind']];},'Die'(g){const c=new Set(['JNG_TICKET_SuperPower']);c['has'](g)&&CPlants['prototype']['Die']['call'](this);}}),oRifter_=InheritO(oObstacle2,{'EName':'oRifter_','height':0x50,'width':0x5a,'beAttackedPointL':0x3f,'beAttackedPointR':0x4b,'HP':Infinity,'PicArr':['','','images/Props/Terrains/Rifter.png'],'Birth'(...g){oObstacle2['prototype']['Birth']['bind'](this)(...g),oObstacle2['prototype']['Die']['bind'](this)();if(oP['FlagZombies']>0x0){let c=CustomSpecial(oRifterAnimate,this['R'],this['C']);}else CustomSpecial(oRifter,this['R'],this['C']);}}),oGoUpIce_=InheritO(oObstacle,{'EName':'oGoUpIce_','$_plant':oGoUpIce,'Birth'(...g){oObstacle['prototype']['Birth']['bind'](this)(...g),oObstacle['prototype']['Die']['bind'](this)(),CustomSpecial(this['$_plant'],this['R'],this['C']);}}),oGoDownIce_=InheritO(oGoUpIce_,{'EName':'oGoDownIce_','$_plant':oGoDownIce}),oRandomIce_=InheritO(oGoUpIce_,{'EName':'oRandomIce_','$_plant':oRandomIce}),oSummonZombieObs_=InheritO(oGoUpIce_,{'EName':'oSummonZombieObs_','$_plant':oSummonZombieObs}),oZombiePlusBloodObs_=InheritO(oSummonZombieObs_,{'EName':'oZombiePlusBloodObs_','$_plant':oZombiePlusBloodObs}),oZombieComeOnObs_=InheritO(oSummonZombieObs_,{'EName':'oZombieComeOnObs_','$_plant':oZombieComeOnObs}),oFruitBasket_=InheritO(oSummonZombieObs_,{'EName':'oFruitBasket_','$_plant':oFruitBasket}),oRoofTile_=InheritO(oObstacle2,{'EName':'oRoofTile_','$_plant':oRoofTile,'PKind':0x5,'Birth'(...g){oObstacle2['prototype']['Birth']['bind'](this)(...g),oObstacle['prototype']['Die']['bind'](this)(),oSym['addTask'](0x5,()=>{CustomSpecial(this['$_plant'],this['R'],this['C']);});}}),oTrafficLight_=InheritO(oObstacle2,{'EName':'oTrafficLight_','$_plant':oTrafficLight,'PKind':0x6,'type':-0x1,'Birth'(...g){if(this['type']<0x0)return oSym['addTask'](0xa,()=>{this['Birth'](...g);}),this;oObstacle2['prototype']['Birth']['bind'](this)(...g),oObstacle['prototype']['Die']['bind'](this)(),this['Die'](),CustomSpecial(oTrafficLight,this['R'],this['C'])['SetColor'](this['type']);}}),oSOS=InheritO(oFlowerBed,{'EName':'oSOS','width':0x64,'height':0x50,'PKind':0x5,'HP':Infinity,'isPlant':![],'canEat':![],'Tools':!![],'PicArr':['','','images/Props/Terrains/SOS.png'],'BirthStyle':(g,c,w,I)=>{g['zIndex']=-0x1,I['z-index']=-0x1,EditEle(w,{'id':c,'data-jng-constructor':g['EName']},I,EDPZ);let Q={};oSym['addTask'](0x1,function k(){for(let f=0x0;f<=PKindUpperLimit;f++){let G=g['R']+'_'+g['C']+'_'+f,z=oGd['$'][G];if(!z)continue;if(Q[G]&&Q[G]===z)continue;Q[G]=z;let e=z['Die'];z['Die']=(...X)=>{let F=![];for(let H=0x0,W=oGd['$'];H<=PKindUpperLimit;H++){let x=W[z['R']+'_'+z['C']+'_'+H];x&&x!=z&&(!(H==0x5&&x==g)&&(F=!![]));}!F&&toOver(0x2),e['bind'](z)(...X);};}oSym['addTask'](0x12c,k);});},'PrivateBirth'(g){}}),oSculpture_=InheritO(oRifter_,{'EName':'oSculpture_','height':0xb1,'width':0x54,'HP':Infinity,'beAttackedPointL':0x3f,'beAttackedPointR':0x4b,'$_zombie':oSculpture,'Birth'(...g){oObstacle2['prototype']['Birth']['bind'](this)(...g),oObstacle2['prototype']['Die']['bind'](this)(),oGd['killAll'](this['R'],this['C'],'JNG_TICKET_Sculpture'),!oGd['$LockingGrid'][this['R']+'_'+this['C']]&&PlaceZombie(this['$_zombie'],this['R'],this['C'],!!oS['isStartGame']);}}),oCrystal_=InheritO(oRifter_,{'EName':'oCrystal_','height':0xb1,'width':0x54,'HP':Infinity,'beAttackedPointL':0x3f,'beAttackedPointR':0x4b,'$_zombie':oCrystal,'Birth'(...g){oObstacle2['prototype']['Birth']['bind'](this)(...g),oObstacle2['prototype']['Die']['bind'](this)(),oGd['killAll'](this['R'],this['C'],'JNG_TICKET_Sculpture'),oP['FlagZombies']<0x1?oSym['addTask'](Math['random']()*0x1e,()=>{!oGd['$LockingGrid'][this['R']+'_'+this['C']]&&PlaceZombie(this['$_zombie'],this['R'],this['C']);}):!oGd['$LockingGrid'][this['R']+'_'+this['C']]&&PlaceZombie(this['$_zombie'],this['R'],this['C']);}}),oTombstone_=InheritO(oRifter,{'EName':'oTombstone_','$_plant':oTombstone,'type':-0x1,'PKind':0x5,'HP':Infinity,'Birth'(...g){if(this['type']<0x0)return oSym['addTask'](0xa,()=>{this['Birth'](...g);}),this;oObstacle2['prototype']['Birth']['bind'](this)(...g),oObstacle2['prototype']['Die']['bind'](this)();for(let w=0x0;w<=PKindUpperLimit;w++){if(w==0x3)continue;let I=oGd['$'][this['R']+'_'+this['C']+'_'+w];I&&(I['isPlant']?I['Bouncerandom']():I['Die']('JNG_TICKET_Tombstone'));}let c=['tomb_sun_buff','tomb','tomb_sun','tomb_tool','tomb_plant','tomb_plant_buff','tomb_necro'];oSym['addTask'](0x1e*Math['random'](),()=>{if(!oS['DKind'])oTombstone['appearSingle'](this['R'],this['C'],c[this['type']]);});}}),oIceBlock_=InheritO(oRifter_,{'EName':'oIceBlock_','height':0xb1,'width':0x54,'HP':Infinity,'beAttackedPointL':0x3f,'beAttackedPointR':0x4b,'$_zombie':oIceBlock,'Birth'(...g){oObstacle2['prototype']['Birth']['bind'](this)(...g),oObstacle2['prototype']['Die']['bind'](this)(),oGd['killAll'](this['R'],this['C'],'JNG_TICKET_Sculpture');let c=new this['$_zombie']();oSym['addTask'](0x5*Math['abs'](0x9-this['C']),()=>{!oGd['$LockingGrid'][this['R']+'_'+this['C']]&&oP['AppearUP'](c,this['R'],this['C'],{'useEleBodyAnim':!![]},![]);});}}),__HAS_RESET_WATER_WHICH_FLAG=![],__tmpStartPoints__=[],__tmpWaterPoints__=[],oWaterOri_=InheritO(oObstacle2,{'EName':'oWaterOri_','CName':$__language_Array__['6fcfd4861e1f393febe6945e4ec16deb'],'PicArr':['','','images/Props/GoIce/5.webp'],'CanGrow'(g,c,w){let I=c+'_'+w,Q=this;if(oGd['$LockingGrid'][I])return![];return oGd['$GdType'][c][w]!==0x0?!(w<0x1||w>0x9)&&(!g[0x1]||g[0x1]['isPlant']):!(Q['UndergroundPlant']&&oGd['$GdType'][c][w]===0x2)&&g[0x0]&&!g[Q['PKind']];},'Birth'(g,c,w,I,Q){__HAS_RESET_WATER_WHICH_FLAG=!![],__tmpStartPoints__['push']([w,I]),__tmpWaterPoints__['push']([w,I]);}}),oWaterPath_=InheritO(oWaterOri_,{'EName':'oWaterPath_','CName':$__language_Array__['6c5257673e0f11be07086630e05a524e'],'PicArr':['','','images/Props/GoIce/5.webp'],'Birth'(g,c,w,I,Q){__HAS_RESET_WATER_WHICH_FLAG=!![],__tmpWaterPoints__['push']([w,I]);}});function parse(g){let c;try{c=JSON['parse'](g);}catch(w){let I=g;try{I=decodeURI(atob(g));}catch(Q){}c=JSON['parse'](decryptRC4(I,'__JN324G_PVZ123_TRAVEL!%#@$as123'));}return c;}let LevelConfigJson=parse(sessionStorage['LevelCreater_LevelTmp']);if(LevelConfigJson['Slots']<0xa)oS['Slots']=LevelConfigJson['Slots'];if(isNullish(oS['TombConfig']))oS['TombConfig']={};oS['TombConfig']['rewardPlantsSize']=0x0;let[oldExitlevel,oldtoOver]=[Exitlevel,toOver],levelWin=![],levelOver=![],levelFileName=sessionStorage['LevelCreater_LevelName'],plants=[oPeashooter,oSunFlower,oPotatoMine,oPotatoMine2,oWallNut,oStoneFlower,oRadish,oSnowPea,oRepeater,oCherryBomb,oCherryBomb2,oTallNut,oSunShroom,oPuffShroom,oScaredyShroom,oFumeShroom,oSporeShroom,oBambooUncle,oBambooUncle1,oDoomShroom,oDoomShroom1,oNutBowling,oBoomNutBowling,oNutBowlingPay,oBoomNutBowlingPay,oBigWallNutPay,oBegonia,oIceAloe,oPepper,oImitater,oMonotropa,oSpikeweed,oTorchwood,oKiwibeast,oAbutilonHybriden,oPumpkinHead,oMiracleImitater,oJalapeno,oFlowerPot,oCabbage,oKernelPult,oPlantern,oBlover,oShiitake,oCranberry,oXshooter,oMacintosh,oMelonPult,oElecTurnip,oGraveBuster,oUmbrellaLeaf,oLilyPad,oEichhornia,oIceShroom,oSquash,oApple],allTerrainObjects=[oFlowerBed,oMould,oSOS,oSummonZombieObs_,oZombiePlusBloodObs_,oZombieComeOnObs_,oRifter_,oGoUpIce_,oGoDownIce_,oRandomIce_,oSculpture_,oCrystal_,oIceBlock_,oRoofTile_,oTrafficLight_,oFruitBasket_,oWaterOri_,oWaterPath_,oTombstone_],zombies=[oZombie,oConeheadZombie,oBucketheadZombie,oNewspaperZombie,oBalloonZombie,oStrollZombie,oFootballZombie,oCigarZombie,oCaskZombie,oSadakoZombie,oImp,oMembraneZombie,oMakeRifterZombie,oSkatingZombie,oPushIceImp,oZomboni,oSculptorZombie,oBeetleCarZombie,oThiefZombie,oGargantuar,oSnorkelerZombie,oPeashooterZombie,oWallNutZombie,oJalapenoZombie],AllNames=plants['concat'](allTerrainObjects)['concat'](zombies),AllTerrainName;(function(){let g={};for(let c in AllNames){g[AllNames[c]['prototype']['EName']]=AllNames[c];}AllNames=g,g={};for(let w in allTerrainObjects){g[allTerrainObjects[w]['prototype']['EName']]=allTerrainObjects[w];}AllTerrainName=g;}());if(LevelConfigJson['VaseBreaker']){if(LevelConfigJson['TimeEvent']){let p_name=[],z_name=[];for(let event of LevelConfigJson['TimeEvent']){if(event['vases'])for(let json of event['vases']){for(let i in(_json$objects=json['objects'])!==null&&_json$objects!==void 0x0?_json$objects:{}){var _json$objects;if(json['objects'][i]['type']===0x0)p_name['push'](i);else json['objects'][i]['type']===0x1&&z_name['push'](i);}}}p_name=p_name['unique'](),z_name=z_name['unique'](),LevelConfigJson['PName']=p_name,LevelConfigJson['ZName']=z_name;}}let oS_PName=((()=>{let g=[];return LevelConfigJson['PName']['forEach'](c=>{g['push'](AllNames[c]);}),g;})()),oS_ZName=((()=>{let g=[];return LevelConfigJson['ZName']['forEach'](c=>{g['push'](AllNames[c]);}),g;})());const oS_PicArr=[];allTerrainObjects['forEach'](g=>{const c=g['prototype'];if(c['hasOwnProperty']('$_zombie'))oS_ZName['push'](c['$_zombie']);else!isNullish(c['PicArr'])&&oS_PicArr['push'](...c['PicArr']);});let oS_configs=((()=>{let g=['StaticCard','CanSelectCard','SunNum','LevelName','LoadMusic','StartGameMusic'],c={};for(let w of g){c[w]=LevelConfigJson[w];}return c;})());(function getConfigs(){var g;let c=['Tutorial','Forest','Forestjx','Marsh','Marshjx',['SeasonAutumn','SeasonA'],['SeasonWinter','SeasonW'],'Industry','Mirage',['Mirage2','Mirage']],w={'Tutorial':{'LoadMusic':'Bgm_Tutorial_Ready','backgroundImage':'images/interface/background1.webp','StartGameMusic':'Bgm_Tutorial_Fight','backgroundMask':'BgMask-Tutorial'},'Forest':{'LoadMusic':'Bgm_Forest_Ready','StartGameMusic':'Bgm_Forest_Fight','backgroundMask':'BgMask-Forest'},'Forestjx':{'LoadMusic':'Bgm_Forest_Ready_JX','StartGameMusic':'Bgm_Forest_Fight_JX','backgroundMask':'BgMask-Forest','DKind':0x0},'Marsh':{'DKind':0x0,'backgroundMask':'BgMask-Marsh'},'Marshjx':{'LoadMusic':'Bgm_Marsh_Ready_JX','StartGameMusic':'Bgm_Marsh_Fight_JX','DKind':0x1,'backgroundMask':'BgMask-Marsh'},'Polar':{'backgroundImage':'images/interface/Polar.webp','DKind':0x1,'LoadMusic':'Bgm_Polar_Ready_1','StartGameMusic':'Bgm_Polar_Fight_1','backgroundMask':'BgMask-Polar'},'PolarNight':{'backgroundImage':'images/interface/Polar2.webp','DKind':0x0,'LoadMusic':'Bgm_Polar_Ready_2','StartGameMusic':'Bgm_Polar_Fight_'+(0x2+Math['round'](Math['random']()*0x2)),'backgroundMask':'BgMask-Polar'},'SeasonWinter':{'DKind':0x0,'backgroundMask':'BgMask-Polar'},'Mirage':{'DKind':0x1,'backgroundImage':'images/interface/Mirage.webp','backgroundMask':'BgMask-Mirage'}},I=['LoadMusic','StartGameMusic','backgroundMask','DKind','backgroundImage','LF'];for(let Q of c){let k,f;Q instanceof Array?(k=Q[0x0],f=Q[0x1]):k=f=Q;!w[k]&&(w[k]={});for(let G of I){LevelConfig['config'][f][G]&&(w[k][G]=LevelConfig['config'][f][G]);}}w['Mirage']['backgroundImage']='images/interface/Mirage.webp',w['Mirage2']['backgroundImage']='images/interface/Mirage_Night.webp',w['Mirage2']['DKind']=0x0,!oS_configs['LoadMusic']&&(oS_configs['LoadMusic']=w[LevelConfigJson['Scene']]['LoadMusic']),!oS_configs['StartGameMusic']&&(oS_configs['StartGameMusic']=w[LevelConfigJson['Scene']]['StartGameMusic']),Object['assignWithoutOverwrite'](oS_configs,w[LevelConfigJson['Scene']]),LevelConfigJson['HaveFog']['leftBorder']>0x0&&(oS_configs['HaveFog']=LevelConfigJson['HaveFog']),(g=LevelConfigJson['effects'])!==null&&g!==void 0x0&&g['DarkStorm']&&(oS_configs['DKind']=0x0),!oS['OriginLvl']&&(oS['OriginLvl']='FanmadeTools/LevelLoader.js'),oS_PicArr['push'](oS_configs['backgroundImage']);}());let oP_configs=((()=>{let g=['FlagNum','FlagToSumNum','AZ'],c={};for(let w of g){c[w]=LevelConfigJson[w];}return c['FlagToSumNum']['a1']=c['FlagToSumNum']['a1']['slice'](0x1),c['FlagToSumNum']['a2']=c['FlagToSumNum']['a2']['slice'](0x1),c['AZ']['forEach'](I=>{I[0x0]=AllNames[I[0x0]];}),LevelConfigJson['VaseBreaker']&&(c['FlagNum']=0x1869f,c['FlagToSumNum']['a1']=[0x1869f],c['FlagToSumNum']['a2']=[0x0]),c;})()),boomTimes=0x0,oS_JSON=Object['assign'](oS_configs,{'PName':oS_PName,'ZName':oS_ZName,'PicArr':oS_PicArr,'FixedProps':levelFileName?{}:'disabled','isScroll':LevelConfigJson['VaseBreaker']?![]:!![],'CardsType':((()=>{let g={},c={};for(let w of oS_PName){c[w['prototype']['EName']]=!![];}if(LevelConfigJson['LockedCards']&&LevelConfigJson['LockedCards']['length']>0x0)for(let I=0x0;I<LevelConfigJson['LockedCards']['length'];I++){c[LevelConfigJson['LockedCards'][I]]&&(g[AllNames[LevelConfigJson['LockedCards'][I]]['prototype']['EName']]=0x2);}return g;})()),'LoadAccess'(g){oS['Lvl']='Fanmade';switch(LevelConfigJson['Scene']){case'Polar':case'PolarNight':oAudioManager['playAudio']('Bgm_Polar_Noise',0x1),!oS['DKind']&&(NewEle('PolarFire2','span',null,{'className':'PolarFire'},$('tGround')),NewEle('PolarFire','span',null,{'className':'PolarFire'},$('tGround')));break;case'SeasonWinter':oAudioManager['playAudio']('Bgm_Polar_Noise',0x1),addEventListenerRecord('jng-event-startgame',()=>{oEffects['BgParticle']({'url':'images/Props/Effect/snow_pieces.png','style':'left:'+oS['EDAllScrollLeft']+'px;'});},{'once':!![]});break;case'Industry':oAudioManager['playAudio']('Bgm_Industry_Noise',0x1);break;}LevelConfigJson['effects']['DarkStorm']&&(oAudioManager['playAudio']('rain',!![],0.5),oMiniGames['DarkRain'](0x2,0x2,0x3));LevelConfigJson['effects']['Invisible']&&SetStyle($('dZombiePreview'),{'visibility':'hidden'});if(LevelConfigJson['Scene']==='SeasonAutumn'){oWaterPath['autoRenderPath']=![];let c=[[0x3,0x1],[0x3,0x6]];for(let w=0x0;w<c['length'];w++){oGd['$GdType'][c[w][0x0]][c[w][0x1]]=0x2,oGd['$WaterDepth'][c[w][0x0]][c[w][0x1]]=0xa,oWaterPath['wateranim'](c[w][0x0],c[w][0x1],w==0x0?-0x23:-0x14,0.8);}}if(LevelConfigJson['VaseBreaker']){let I=0x0,Q=0x0;function f(){if(Q>oS['EDAllScrollLeft']){EDAll['scrollLeft']=oS['EDAllScrollLeft'],g(),readGround(0x0);return;}oSym['addTask'](0x1,function(){EDAll['scrollLeft']=Q=(Math['sin']((I/0x32*0xb4-0x5a)/0xb4*Math['PI'])+0x1)/0x2*(oS['EDAllScrollLeft']+0.1),I++,f();});}oS['ControlFlagmeter']=![],oSym['addTask'](0x1e,f);}else readGround(0x0),oSym['addTask'](0x1e,g);},'StartGame'(){let g=0x0;LevelConfigJson['effects']['Invisible']&&SetStyle($('dZombiePreview'),{'visibility':'visible'});if(LevelConfigJson['RainingSeed'])oMiniGames['RainWithSeeds'](oS['PName'],0x1c2,0x5,[],0x2bc,!LevelConfigJson['effects']['DarkStorm']);else{if(LevelConfigJson['LastStand'])oMiniGames['LimitedTimeNoCool']();else{if(LevelConfigJson['VaseBreaker'])oAudioManager['pauseMusic'](),oAudioManager['playMusic'](oS['StartGameMusic']),SetVisible($('tdShovel'),$('dFlagMeter'),$('dTop')),SetHidden($('dCardList'),$('dTop')),PrepareGrowPlants(w=>{oP['Monitor'](),BeginCool();let I=0x0;Q();function Q(){oSym['addTask'](0x12c,f=>{oSym['addTask'](0xc8,function G(){let z=!![];for(let e of $P){if(/oVase|oVaseP|oVaseZ/['test'](e['EName'])){z=![];break;}}z&&oP['NumZombies']==0x0?k():oSym['addTask'](0xc8,G);});});}function k(){var f;I++,LevelConfigJson!==null&&LevelConfigJson!==void 0x0&&(f=LevelConfigJson['TimeEvent'])!==null&&f!==void 0x0&&f[I]?(readGround(I),readZombies(I),c(I,I+0x1),Q()):toWin();}});else oS['StaticCard']===0x0?oMiniGames['ConveyorBelt'](oS['PName'],0x226-LevelConfigJson['ConveySpeed']*0x61,0x4-LevelConfigJson['ConveySpeed'],[],0x8):(oS['DefaultStartGame'](),g=0x5dc);}}function c(w,I){for(let k in(Q=LevelConfigJson===null||LevelConfigJson===void 0x0?void 0x0:LevelConfigJson['TimeEvent'])!==null&&Q!==void 0x0?Q:{}){var Q;w<k&&k<I&&oSym['addTask'](0x640*(k-Number['parseInt'](k)),()=>{readGround(k),readZombies(k);});}}addEventListenerRecord('jng-event-startgame',()=>{var w,I;readZombies(0x0),c(0x0,0x1);!LevelConfigJson['VaseBreaker']&&oSym['addTask'](g,()=>{readGround(0x1),readZombies(0x1),c(0x1,0x2);});LevelConfigJson['effects']['Frostbite']&&oMiniGames['Frostbite'](k=>0x9c4+(Math['random']()*0x12c-0x96),0x1e,![]);if(LevelConfigJson['effects']['Invisible']){var Q=new MutationObserver(function(k){k['forEach'](function(f){for(var G=0x0;G<f['addedNodes']['length'];G++)$Z[f['addedNodes'][G]['id']]&&($Z[f['addedNodes'][G]['id']]['isCounted']&&(SetStyle(f['addedNodes'][G]['childNodes'][0x0],{'visibility':'hidden'}),SetStyle(f['addedNodes'][G]['childNodes'][0x1],{'visibility':'hidden'}),$Z[f['addedNodes'][G]['id']]['CanDrawBlood']=![]));});});Q['observe'](EDPZ,{'childList':!![],'subtree':!![]});}if((w=LevelConfigJson['effects'])!==null&&w!==void 0x0&&w['IceStorm']&&((I=LevelConfigJson['effects'])===null||I===void 0x0?void 0x0:I['IceStorm'])!==0x0){let k=LevelConfigJson['effects']['IceStorm'],f=[null];for(let e=0x1;e<=0x5;e++){f[e]=[];for(let X=0x1;X+e-0x1<=oS['R'];X++){f[e]['push']([X,X+e-0x1]);}}let G=[null,[0.7,0.2,0.1,0x0,0x0],[0.5,0.2,0.2,0.1,0x0],[0.4,0.3,0.2,0.1,0x0],[0.2,0.2,0.3,0.2,0.1],[0x0,0.2,0.3,0.3,0.2]],z=[null,[0x3,0x1],[0x4,0x2],[0x4,0x3],[0x5,0x4],[0x7,0x4]];for(let F=0x1;F<G['length'];F++){let H=G[F][0x0];for(let W=0x1;W<G[F]['length'];W++){H+=G[F][W],G[F][W]=H;}}(function x(){oSym['addTask'](0xc80+Math['random']()*0x5dc,function r(){let t=Math['random'](),U=0x0;for(let O=0x0;O<G[k]['length'];O++){if(t<G[k][O]){U=O+0x1;break;}}let u=f[U]['random']();oMiniGames['IceStorm'](u[0x0],u[0x1],Math['max'](Math['floor'](Math['random']()*z[k][0x0]-(0x5-U)/2.2),0x0)+z[k][0x1]),oSym['addTask'](Math['random']()*(0x1194-k*0xc8)+0x6a4,r);});}());}},{'once':!![]}),!levelFileName&&new MutationObserver(w=>w['forEach'](I=>I['removedNodes']['forEach'](Q=>{let k=Q['id'],f=window[Q['dataset']['jngConstructor']];if(!f)return;let G=f['prototype']['EName'];k['includes']('P_0.')&&(/oDoomShroom|oBambooUncle|oCherryBomb|oJalapeno/['test'](G)&&++boomTimes);})))['observe'](EDPZ,{'childList':!![],'subtree':!![]});}});function readGround(g){var c,w,I,Q;(function k(f=0x1){var G,z,e;let X=(G=LevelConfigJson===null||LevelConfigJson===void 0x0?void 0x0:(z=LevelConfigJson['TimeEvent'])===null||z===void 0x0?void 0x0:(e=z[g])===null||e===void 0x0?void 0x0:e['ground'])!==null&&G!==void 0x0?G:[];for(let x in X){let r=X[x];if(g!==0x0){}if(Number(!!(AllTerrainName[r[0x0]]&&!AllTerrainName[r[0x0]]['prototype']['NotTerrain']))===f^0x1)continue;let[t]=GetAP(GetX(r[0x1]),GetY(r[0x2]),r[0x1],r[0x2]),U=!![];for(let u of t){if(u&&u['Tools']){U=![];break;}}if(AllNames[r[0x0]]&&!AllNames[r[0x0]]['prototype']['CanGrow'](t,r[0x1],r[0x2])){var F,H,W;if(!U)continue;if(r[0x0]===((F=t[(H=AllNames[r[0x0]])===null||H===void 0x0?void 0x0:(W=H['prototype'])===null||W===void 0x0?void 0x0:W['PKind']])===null||F===void 0x0?void 0x0:F['EName']))continue;oGd['killAll'](r[0x1],r[0x2],'JNG_TICKET_SuperPower'),[t]=GetAP(GetX(r[0x1]),GetY(r[0x2]),r[0x1],r[0x2]);}if(AllNames[r[0x0]]['prototype']['CanGrow'](t,r[0x1],r[0x2])){let O=CustomSpecial(AllNames[r[0x0]],r[0x1],r[0x2]);r[0x3]&&Object['assign'](O,r[0x3]),(r[0x4]||r[0x4]==0x0)&&(O['type']=r[0x4]);}}f>0x0&&(checkGdTypeChanged(),k(f-0x1));}(),((c=LevelConfigJson['TimeEvent'])===null||c===void 0x0?void 0x0:(w=c[g])===null||w===void 0x0?void 0x0:w['vases'])&&placeVases((I=LevelConfigJson['TimeEvent'])===null||I===void 0x0?void 0x0:(Q=I[g])===null||Q===void 0x0?void 0x0:Q['vases']));}function checkGdTypeChanged(){if(__HAS_RESET_WATER_WHICH_FLAG){__HAS_RESET_WATER_WHICH_FLAG=![],oS['observeZombieLayer']=!![],oS['autoWaterFlowDirection']='bfs';let g={};oS['InitWaterPath']={'diyStartPoints':__tmpStartPoints__,'beforeDFS'(Q){ClearChild($('tGround_MaskImage'));for(let f=0x1;f<=oS['R'];f++){for(let G=0x1;G<=oS['C'];G++){ClearChild($('wave_'+f+'_'+G)),ClearChild($('water_'+f+'_'+G)),Q[f][G]===0x2&&(g[f+'_'+G]=!![]),Q[f][G]=oS['LF'][f];}}for(let z=0x0;z<__tmpWaterPoints__['length'];z++){Q[__tmpWaterPoints__[z][0x0]][__tmpWaterPoints__[z][0x1]]=0x2;}}},oWaterPath['init']();const w=oGd['$'],I=oGd['$GdType'];for(let Q=0x1;Q<=oS['R'];Q++){for(let f=0x1;f<=oS['C'];f++){if(g[Q+'_'+f]&&I[Q][f]!==0x2){let G=w[Q+'_'+f+'_1'];if((G===null||G===void 0x0?void 0x0:G['EName'])==='oEichhornia')G['refreshLivingState']();}else{if(!g[Q+'_'+f]&&I[Q][f]===0x2)for(let z=0x0;z<=PKindUpperLimit;z++){let e=Q+'_'+f+'_'+z,X=w[e];if((X===null||X===void 0x0?void 0x0:X['EName'])==='oEichhornia')X['refreshLivingState']();else!isNullish(X)&&X['Die']('JNG_TICKET_SuperPower');}}}}__tmpStartPoints__=[],__tmpWaterPoints__=[];if(LevelConfigJson['Scene']==='SeasonAutumn'&&oS['isStartGame']){let F=[[0x3,0x1],[0x3,0x6]];for(let H=0x0;H<F['length'];H++){oGd['$GdType'][F[H][0x0]][F[H][0x1]]=0x2,oGd['$WaterDepth'][F[H][0x0]][F[H][0x1]]=0xa,oWaterPath['wateranim'](F[H][0x0],F[H][0x1],H==0x0?-0x23:-0x14,0.8),ClearChild($('water_'+F[H][0x0]+'_'+F[H][0x1]));}}}}function placeVases(g){let w=(function(){let f={};for(let G in allTerrainObjects){f[allTerrainObjects[G]['prototype']['EName']]=allTerrainObjects[G];}return f;}()),I={};for(let f of g){var Q;let G=f['possiblePlace']?JSON['parse']('['+f['possiblePlace']+']'):[];if(LevelConfigJson['VaseBreaker']&&f['type']===0x3)continue;if(f['type']!==0x3)for(let F=G['length']-0x1;F>=0x0;F--){(I[G[F][0x0]+'_'+G[F][0x1]]||oGd['$'][G[F][0x0]+'_'+G[F][0x1]+'_1'])&&G['splice'](F,0x1);}let z=[],e=[oVase,oVaseP,oVaseZ,undefined][(Q=f['type'])!==null&&Q!==void 0x0?Q:0x0];if(f['objects'])for(let H in f['objects']){let W=AllNames[H]||w[H];if(f['objects'][H]['type']===0x2&&e)continue;for(let x=0x0;x<f['objects'][H]['count'];x++){z['push']({'obj':W,'type':f['objects'][H]['type']});}}z['shuffle']();let X=0x0;while(X<z['length']&&G['length']>0x0){let r=Math['floor'](G['length']*Math['random']()),t=G[r],U=X;if(e)I[t[0x0]+'_'+t[0x1]]=!![],oSym['addTask'](Math['random']()*0x96,u=>{!oGd['$'][t[0x0]+'_'+t[0x1]+'_1']&&CustomSpecial(e,t[0x0],t[0x1])['SetCard'](z[U]);});else{let u=z[U];if(u['type']===0x0||u['type']===0x2){let O=[];for(let D=0x0;D<=PKindUpperLimit;D++){O['push'](oGd['$'][t[0x0]+'_'+t[0x1]+'_'+D]);}u['obj']['prototype']['CanGrow'](O,t[0x0],t[0x1])&&CustomSpecial(u['obj'],t[0x0],t[0x1]);}else u['type']===0x1&&PlaceZombie(u['obj'],t[0x0],t[0x1],t[0x1]>oS['C']?0x0:0x1);}X++,G['splice'](r,0x1);}}}function readZombies(g){var c,w,I;let Q=(c=LevelConfigJson===null||LevelConfigJson===void 0x0?void 0x0:(w=LevelConfigJson['TimeEvent'])===null||w===void 0x0?void 0x0:(I=w[g])===null||I===void 0x0?void 0x0:I['zombies'])!==null&&c!==void 0x0?c:[];for(let k of Q){let f=k['row']['random'](),G=k['column']['random']();oSym['addTask'](k['delay'],()=>{for(let z=0x0;z<k['num'];z++){oSym['addTask'](z*k['numDelay'],()=>{PlaceZombieCustom(AllNames[k['type']],f,G,G<=0xa?0x1:0x0);});}});}}if(!LevelConfigJson['VaseBreaker']){var _LevelConfigJson$Time13;oP_configs['FlagToMonitor']={};let functionJson={},json=(_LevelConfigJson$Time13=LevelConfigJson===null||LevelConfigJson===void 0x0?void 0x0:LevelConfigJson['TimeEvent'])!==null&&_LevelConfigJson$Time13!==void 0x0?_LevelConfigJson$Time13:{};for(let i in json){var _functionJson;let arr=(_functionJson=functionJson[Number['parseInt'](i)-0x1])!==null&&_functionJson!==void 0x0?_functionJson:[];arr['push'](()=>{oSym['addTask'](0x640*(i-Number['parseInt'](i)),()=>{readGround(i),readZombies(i);});}),functionJson[Number['parseInt'](i)-0x1]=arr;}for(let i in functionJson){if(i<0x1)continue;oP_configs['FlagToMonitor'][i]=[()=>{for(let g of functionJson[i]){g();}}];}};function win(){ShowWinItem(NewImg('imgSF','images/interface/Clearance_reward.png','left:535px;top:200px;width:116px;height:119px;',EDAll,{'onclick':g=>GetWin(g['target'],Exitlevel(oS['Lvl'],0x1))}));}oP_configs['FlagToEnd']=()=>{win();},oS['Init'](oS_JSON,oP_configs);};