'use strict';var oMiniGames={'ProtectPlants'(g={},c=[],w=!![]){let I=new Set();for(let k of $P){g['hasOwnProperty'](k['EName'])&&I['add'](k['id']);}for(let f in c){for(let z=0x0,e=oGd['$'];z<=PKindUpperLimit;z++){let X;if(X=e[c[f][0x0]+'_'+c[f][0x1]+'_'+z]){let F=X['Die'];X['Die']=function(...H){F['bind'](X)(...H),toOver(0x2);};}}}function Q(){let H=new Set(I);for(let W of $P){H['has'](W['id'])&&H['delete'](W['id']);}if(H['size']>0x0)return toOver(0x2);oSym['addTask'](0xc8,Q);}w?(oAudioManager['playMusic'](oS['StartGameMusic']),SetVisible($('tdShovel'),$('dFlagMeter'),$('dTop')),oS['InitLawnMover'](),oS['ControlFlagmeter']&&oFlagContent['init']({'fullValue':oP['FlagNum']-0x1,'curValue':0x0}),PrepareGrowPlants(function(){oP['Monitor'](oS['Monitor']),BeginCool(),AutoProduceSun(0x32),Q(),oSym['addTask'](0x5dc,H=>{oP['AddZombiesFlag'](),oS['ControlFlagmeter']&&oFlagContent['show']();});})):addEventListenerRecord('jng-event-startgame',Q,{'once':!![]});},'ConveyorBelt'(g=oS['PName'],i=0x258,c=0x3,w=[],I=0xa,Q={}){let k=NewImg('ConveyorBelt','images/interface/ConveyorBelt.webp','z-index:0',$('dCardList')),f=NewImg('Belt','images/interface/ConveyorInterior.webp','z-index:-1;left:-160px',$('dCardList'));oEffects['Animate'](k,{'left':'0'},0.2/oSym['NowSpeed'],'ease-out'),oEffects['Animate'](f,{'left':'0'},0.2/oSym['NowSpeed'],'ease-out');let G=0x0;(function e(){G>-0x254?f['style']['top']=G--+'px':f['style']['top']=G+=0x255,oSym['addTask'](c,e);}(),oAudioManager['playMusic'](oS['StartGameMusic']),SetVisible($('tdShovel'),$('dFlagMeter'),$('dTop')),SetHidden($('dSunNum')),oS['InitLawnMover'](),oS['ControlFlagmeter']&&oFlagContent['init']({'fullValue':oP['FlagNum']-0x1,'curValue':0x0}));let z={'GetChoseCard'(X){if(oS['Chose']>0x0)return;var F=ArCard['length'];while(F--){ArCard[F]['DID']==X&&(oS['ChoseCard']=F,F=0x0);}return oS['ChoseCard'];},'ChosePlant'(X,F=null){oS['Chose']===-0x1&&CancelShovel();if(oS['Chose']===0x1||$('MovePlant')){CancelPlant();return;}if(F!==null){F===-0x1&&(F=0x9);if(F+0x1>ArCard['length']||F<0x0)return;oS['ChoseCard']=F;}oS['Chose']=0x1,$('MovePlant')&&ClearChild($('MovePlant')),oAudioManager['playAudio']('seedlift');let H=ArCard[oS['ChoseCard']],W=X['clientX']-EDAlloffsetLeft||0x3c,x=X['clientY']||ArCard[oS['ChoseCard']]['PixelTop'],r=H['PName']['prototype'],t=NewImg('MovePlant',r['PicArr'][r['StaticGif']],'left:'+W+'px;top:'+(x+0x14-r['height'])+'px;z-index:258;',EDAll);SetStyle(t,r['ImgStyle']),EditImg(t['cloneNode'](![]),'MovePlantAlpha','',{'visibility':'hidden','opacity':0.4,'z-index':0x1e},FightingScene),EditCompositeStyle({'ele':t,'addFuncs':[['translateX',oS['EDAllScrollLeft']-r['width']/0x2+'px']],'option':0x2}),$(H['DID'])['style']['backgroundImage']='url(images/Card/CardSelected.webp)',SetAlpha($(H['DID']+'img'),0.5),SetHidden($('dTitle')),GroundOnmousemove=GroundOnmousemove1;},'CancelPlant'(){ClearChild($('MovePlant'),$('MovePlantAlpha'),$('HighlightLane'),$('HighlightColumn')),oS['Chose']=0x0;let X=ArCard[oS['ChoseCard']];X&&($(X['DID'])['style']['backgroundImage']='',SetAlpha($(X['DID']+'img'),0x64,0x1)),oS['ChoseCard']='',GroundOnmousemove=function(){};},'GrowPlant'(F,H,W,x,r){let t=oS['ChoseCard'],U=ArCard[t],u=U['PName'],O=u['prototype'],D=U['DID'];if(O['CanGrow'](F,x,r)){oAudioManager['playAudio'](oGd['$GdType'][x][r]===0x2?'plant_water':'plant'+Math['floor'](0x1+Math['random']()*0x2)),new u()['Birth'](H,W,x,r,F);const V=$('imgGrowSoil');V['src']=GrowSoilImg,SetStyle(V,{'left':H+0x55+'px','top':W-0x2d+'px','z-index':0x3*x+0x1,'visibility':'visible'}),oSym['addTask'](0x64,SetHidden,[V]),ArCard['splice'](t,0x1),oS['ChoseCard']='',oS['Chose']=0x0,GroundOnmousemove=()=>{},ClearChild($('MovePlant'),$('MovePlantAlpha'),$(D)),CancelPlant();}else(IsMobile||x<0x1||r<0x1||r>0x9)&&CancelPlant();},'ViewPlantTitle'(){}};RewriteGlobalVariables(z),PrepareGrowPlants(()=>{let X=new Map(),F=0x0;const H=w['map'](W=>W==='random'?g['random']():W);(function W(){const x=ArCard['length'];if(x<I){let U=((()=>{let D={};return g['forEach'](V=>{D[V['prototype']['EName']]=V;}),D;})()),u={};for(let D of $P){var r;if(!Q[D['EName']])continue;u[D['EName']]=((r=u[D['EName']])!==null&&r!==void 0x0?r:0x0)+0x1,u[D['EName']]>=Q[D['EName']]&&delete U[D['EName']];}for(let V=0x0;V<x;V++){var t;let Z=ArCard[V]['PName']['prototype'];if(!Q[Z['EName']])continue;u[Z['EName']]=((t=u[Z['EName']])!==null&&t!==void 0x0?t:0x0)+0x1,Q[Z['EName']]&&u[Z['EName']]>=Q[Z['EName']]&&delete U[Z['EName']];}let O=H[F]?H[F]:U[Object['keys'](U)['random']()];if(O){let J=O['prototype'],d='dCard'+Math['random']();ArCard[x]={'DID':d,'PName':O,'PixelTop':0x258};let y=NewEle(d,'div','position:\x20absolute;\x20top:\x20600px;\x20width:\x20100px;\x20height:\x20120px;\x20cursor:\x20pointer;\x20background-size:100%;\x20clip:\x20rect(auto,\x20auto,\x2060px,\x20auto);',0x0,$('dCardList'));NewEle(d+'img','div','background-image:url('+J['PicArr'][J['CardGif']]+');background-size:100px\x20120px;',{'onmousedown':L=>{GetChoseCard(d),ChosePlant(L),L['stopPropagation'](),L['preventDefault']();},'ontouchstart':L=>{GetChoseCard(d),ChosePlant(L),L['stopPropagation']();if(L['cancelable'])L['preventDefault']();}},y);}F++;}oSym['addTask'](i,W);}());{let x;(function r(){let t=ArCard['length'];while(t--){let U=ArCard[t];U['PixelTop']>0x3c*t+0x5&&U['PixelTop']>=0x5&&(!(x=X['get'](U))&&X['set'](U,x=$(U['DID'])),x['style']['top']=(U['PixelTop']=Math['max'](0x7,0x3c*t+0x7,U['PixelTop']-0x1))+'px');}X['size']>0x96&&X['clear'](),oSym['addTask'](c,r);}());}oP['Monitor'](),oP['AddZombiesFlag'](),oS['ControlFlagmeter']&&oFlagContent['show']();});},'RainWithSeeds'(g=oS['PName'],i=0x258,c=0x5,w=[],I=0x2bc,Q=!![],k=0x9){oAudioManager['pauseMusic'](),oAudioManager['playMusic'](oS['StartGameMusic']),oAudioManager['deleteAudio']('rain');let f=oAudioManager['playAudio']('rain',!![],0.5);oSym['addTask'](0x1,function e(){f['currentTime']>f['duration']-0.4&&(f['currentTime']=0x0),oSym['addTask'](0x3,e);}),SetVisible($('tdShovel'),$('dFlagMeter'),$('dTop')),SetHidden($('dSunNum')),oS['InitLawnMover'](),oS['ControlFlagmeter']&&oFlagContent['init']({'fullValue':oP['FlagNum']-0x1,'curValue':0x0}),oS['ChoseCardObj']=void 0x0;const G=()=>{let X=ArCard['length'];while(X--){if(ArCard[X]===oS['ChoseCardObj'])return X;}};let z={'GroundOnmousemove1'(F){let H=oS['ChoseCardObj']['PName'],W=F['clientX']-EDAlloffsetLeft,x=F['clientY'];if(IsMobile&&F['targetTouches']){let Z=F['targetTouches'][0x0];[W,x]=[Z['clientX']-0x3c,Z['clientY']];}let[[r,t],[U,u]]=[ChosePlantX(W),ChosePlantY(x)],[O]=GetAP(W,x,u,t),D=H['prototype'],V=$('MovePlantAlpha');SetStyle($('MovePlant'),{'left':W+'px','top':x+0x14-D['height']+'px'}),D['CanGrow'](O,u,t)?(SetStyle(V,{'visibility':'visible','left':r+0x73+D['GetDX'](D)+'px','top':U-D['height']+D['GetDY'](u,t,O)+'px'}),PosHighlight(u,t)):(SetHidden(V),ClearChild($('HighlightLane'),$('HighlightColumn')));},'ChosePlant'(X,F){if(typeof F!=='object')return;oS['Chose']===-0x1&&CancelShovel();if(oS['Chose']===0x1&&!oS['ChoseCardObj']){CancelPlant();return;}if(oS['ChoseCardObj'])return;X['stopPropagation']();if(X['cancelable'])X['preventDefault']();ClearChild($('MovePlant')),oAudioManager['playAudio']('seedlift');let H=oS['ChoseCardObj']=F,W=X['clientX']-EDAlloffsetLeft||H['PixelLeft'],x=X['clientY']||H['PixelTop'],r=H['PName']['prototype'];oS['Chose']=0x1,H['hasAnim']=![],H['Ele']['style']['cssText']+='animation-fill-mode:forwards;animation-iteration-count:0;';let t=NewImg('MovePlant',r['PicArr'][r['StaticGif']],'left:'+W+'px;top:'+(x+0x14-r['height'])+'px;z-index:258;',EDAll);SetStyle(t,r['ImgStyle']),EditImg(t['cloneNode'](![]),'MovePlantAlpha','',{'visibility':'hidden','opacity':0.4,'z-index':0x1e},FightingScene),EditCompositeStyle({'ele':t,'addFuncs':[['translateX',oS['EDAllScrollLeft']-r['width']/0x2+'px']],'option':0x2}),H['Ele']['style']['backgroundImage']='url(images/Card/CardSelected.webp)',SetAlpha(H['Eleimg'],0.4),H['Appeared']=!![],SetHidden($('dTitle')),GroundOnmousemove=GroundOnmousemove1;},'GrowPlant'(F,H,W,x,r){let t=oS['ChoseCardObj'],U=t['PName'],u=U['prototype'],O=t['DID'];if(u['CanGrow'](F,x,r)){oAudioManager['playAudio'](oGd['$GdType'][x][r]===0x2?'plant_water':'plant'+Math['floor'](0x1+Math['random']()*0x2)),new U()['Birth'](H,W,x,r,F);const D=$('imgGrowSoil');D['src']=GrowSoilImg,SetStyle(D,{'left':H+0x55+'px','top':W-0x2d+'px','z-index':0x3*x+0x1,'visibility':'visible'}),oSym['addTask'](0x64,SetHidden,[D]),ArCard['splice'](G(),0x1),delete oS['ChoseCardObj'],oS['Chose']=0x0,GroundOnmousemove=()=>{},ClearChild($('MovePlant'),$('MovePlantAlpha'),t['Ele']),CancelPlant();}else(IsMobile||x<0x1||r<0x1||r>0x9)&&CancelPlant();},'CancelPlant'(){let X=oS['ChoseCardObj'];oS['Chose']=0x0,delete oS['ChoseCardObj'],ClearChild($('MovePlant'),$('MovePlantAlpha'),$('HighlightLane'),$('HighlightColumn')),X&&(SetAlpha(X['Eleimg'],0x64,0x1),X['Ele']['style']['backgroundImage']=''),GroundOnmousemove=()=>{};},'ViewPlantTitle'(){}};RewriteGlobalVariables(z),PrepareGrowPlants(()=>{Q&&oEffects['BgParticle']({'style':'z-index:21','url':'images/Props/Effect/Rain.png','timeout':0x4,'move':function(H){H['left']-=4.5*oSym['NowSpeed'],H['top']+=0x6*oSym['NowSpeed'];},'size':{'width':0x8c,'height':0x8c}});let X=0x0;const F=w['map'](H=>H==='random'?g['random']():H);(function H(){const W=ArCard['length'];if(W<k){if((F===null||F===void 0x0?void 0x0:F[X])==='null')X++;else{const x=F[X]?F[X]:g['random'](),r=x['prototype'],t='dCard'+Math['random'](),U=0xd7+Math['random']()*0x258,u='top:-60px;left:'+U+'px;width:100px;height:120px;cursor:pointer;clip:rect(auto,auto,60px,auto);z-index:253;',O=NewEle(t,'div',u+'position:\x20absolute;\x20background-size:100%;',0x0,EDAll),D=NewEle(t+'img','div','width:100px;height:120px;background-image:url('+r['PicArr'][r['CardGif']]+');background-size:100px\x20120px;',{'onmousedown':Z=>{ChosePlant(Z,V);},'ontouchstart':Z=>{ChosePlant(Z,V);}},O),V=ArCard[W]={'DID':t,'PName':x,'hasAnim':![],'PixelTop':-0x3c,'EndTop':0x6e+Math['random']()*0x1b8,'Ele':O,'PixelLeft':U,'Eleimg':D};X++;}}oSym['addTask'](i,H);}(),function W(){ArCard['forEach'](x=>{if(x['PixelTop']<=x['EndTop']){x['Ele']['style']['top']=(x['PixelTop']+=Math['max']((0x4b-x['PixelTop'])/0x14,0x1))+'px';!x['Appeared']&&(x['Eleimg']['style']['opacity']=Math['min'](x['PixelTop']/0x3c,0x1),x['Eleimg']['style']['opacity']==0x1&&(x['Appeared']=!![]));return;}if(x['hasOwnProperty']('countdown')){var r,t;((r=oS)===null||r===void 0x0?void 0x0:(t=r['ChoseCardObj'])===null||t===void 0x0?void 0x0:t['DID'])!==x['DID']&&(x['countdown']-=c,x['countdown']<=0x12c&&!x['hasAnim']&&(oEffects['Animate'](x['Eleimg'],'CardBlink','slow',null,null,null,'infinite'),x['hasAnim']=!![]),x['countdown']<=0x0&&(x['Ele']['onmousedown']=null,x['Ele']['ontouchstart']=null,oEffects['Animate'](x['Ele'],{'transform':'scale(0)'},0.1,'linear',ClearChild),ArCard['delete'](x,!![])));}else x['countdown']=I;}),oSym['addTask'](c,W);}(),oP['Monitor'](),oP['AddZombiesFlag'](),oS['ControlFlagmeter']&&oFlagContent['show']());});},'DarkRain'(g=0xc,i=0xa,c=0x4){let w=!![],I=NewEle('DarkRain_Flash_Mask','div','pointer-events:none;position:absolute;z-index:31;left:0px;width:1600px;height:600px;background:#000;opacity:0.4;',0x0,EDAll),Q=0x1,k=NewEle('DarkRain_Mask','div','pointer-events:none;position:absolute;z-index:31;left:0px;width:1600px;height:600px;background:#000;opacity:0.5;',0x0,EDAll),G=oEffects['BgParticle']({'style':'z-index:21','url':'images/Props/Effect/Rain.png','timeout':0x4,'move':function(F){F['left']-=4.5*oSym['NowSpeed'],F['top']+=0x6*oSym['NowSpeed'];},'size':{'width':0x8c,'height':0x8c}});!$User['LowPerformanceMode']?oSym['addTask'](0x3,function F(){if(!I||!w)return;Q^=0x1,I['style']['opacity']=Q*(Math['random']()*0.4+0.1),oSym['addTask'](Math['random']()*0x14+0x3,F);}):ClearChild(I);let z=oAudioManager['playAudio']('rain',!![],0.5);oSym['addTask'](0x1,function H(){if(!w)return;z['currentTime']>z['duration']-0.4&&(z['currentTime']=0x0),oSym['addTask'](0x3,H);}),oEffects['Animate'](k,{'opacity':0x1},1.5/oSym['NowSpeed'],'linear'),oSym['addTask'](0x96,function(){if(!w)return;e(Math['floor'](Math['random']()*0x2)+0x1);let W=function(){if(!w)return;oSym['addTask'](0x64*(Math['random']()*i+g-i/0x2),function(){e(Math['floor'](Math['random']()*0x2)+0x1),W();}),removeEventListenerRecord('jng-event-startgame',W);};W();});function e(W){oEffects['Animate'](k,'bright_thunder'+W,c/oSym['NowSpeed'],'ease-out');if(W==0x2){let x=oAudioManager['playAudio']('thunder',![],0x1);oSym['addTask'](c*0x3c,function(){x=oAudioManager['playAudio']('thunder'),oAudioManager['modifyAudioVolume'](x,0.5);});}else{let r=oAudioManager['playAudio']('thunder',![],0x1);}}function X(){w=![],oEffects['StopAllAnims'](k,!![]),I['style']['opacity']=0x0,oSym['addTask'](0x1,()=>{oEffects['AudioFadeOut']('rain',0x0,0x1/oSym['NowSpeed']),oEffects['Animate'](G,{'opacity':0x0},0x1/oSym['NowSpeed'],'linear'),oEffects['Animate'](k,{'opacity':0x0},0x1/oSym['NowSpeed'],'linear');}),oSym['addTask'](0x64,()=>{ClearChild(k,I,G);});}return[I,k,X];},'LimitedTimeNoCool'(g=Infinity,i,c=null){g!==Infinity&&oFlagContent['init']({'fullValue':0x1,'curValue':0x0,'MeterType':'LeftBar\x20GreenBar','HeadType':'NoneHead'})['show']()['update']({'curValue':0x1,'animConfig':{'duration':0x2}});{let f=[[$__language_Array__['e52c5a8bf3b02da9f3f513bdefdce2fe'],0x3c,'80px'],[$__language_Array__['dac2d84680165b0590c2472202a19292'],0x28,'60px'],[$__language_Array__['b187d88983c4a474437d1fe596920a89'],0x64,'90px']],G=NewEle('','div','left:\x20450px;\x20top:\x20300px;\x20transform:\x20translate(-50%,\x20-50%);color:red;font-size:80px;opacity:0;',{'innerText':f[0x0][0x0],'id':'dReadySetPlant','className':'2px_shadow_with_shadow'},FightingScene);const z=function(){let e=0x0;oAudioManager['playAudio']('readysetplant');for(let X=0x0;X<f['length'];X++){oSym['addTask'](e,()=>{G['innerText']=f[X][0x0],G['style']['opacity']='',G['style']['fontSize']=f[X][0x2],EditCompositeStyle({'ele':G,'delFuncs':['scale'],'addFuncs':[['scale',0.95]],'option':0x2}),oSym['addTask'](0x1,()=>{oEffects['Animate'](G,{'transform':EditCompositeStyle({'ele':G,'delFuncs':['scale'],'addFuncs':[['scale',1.1]]})},0.3/oSym['NowSpeed'],'ease-out');});}),e+=f[X][0x1];}oSym['addTask'](e,()=>{ClearChild(G);});};z();};oAudioManager['playMusic'](oS['StartGameMusic']),SetVisible($('tdShovel'),$('dFlagMeter'),$('dTop')),oS['InitLawnMover']();let w=![],I=g,Q;RewriteGlobalVariables({'ViewPlantTitle':function(e){if(e===null)return;let X=$('dTitle'),F=ArCard[e],H=F['PName']['prototype'],W=''+H['CName']+$__language_Array__['2c0e8d4abc473823a5f7c10dcd376452'][0x0]+H['coolTime']+$__language_Array__['2c0e8d4abc473823a5f7c10dcd376452'][0x1]+H['Tooltip'];F['Forbidden']?W+=$__language_Array__['f5c939dd419fefcba0486429086416f8']:(!F['CDReady']&&(W+=$__language_Array__['dab725427db871f7c22f8aa350e2140f']),!F['SunReady']&&(W+=$__language_Array__['0fa80b52e42f193949eb715cd11502ae'])),X['innerHTML']=W,SetStyle(X,{'top':0x3c*e+'px','left':0x64+oS['EDAllScrollLeft']+'px'});},'ShovelPlant':function(e){oAudioManager['playAudio']('plant2');let[X,F]=e;if(F&&F['isPlant']&&F['canShovel']){if(F['PKind']||!(X[0x1]||X[0x2])){let H=F['SunNum'],[W,x]=[F['R'],F['C']];F['Die']('JNG_TICKET_SuperPower');if(!$P[F['id']]){while(H>0x32){let U=AppearSun(GetX(x),GetY(W),0x32,0x0);oSym['addTask'](0x64,function(){ClickSun(U['id']);}),H-=0x32;}let t=AppearSun(GetX(x),GetY(W),H,0x0);oSym['addTask'](0x64,function(){ClickSun(t['id']);});}oS['MPID']='';}}CancelShovel();}}),oMiniGames['GrowWithoutSun'](![],function(){oSym['addTask'](0x1e,function(){Q=NewEle('startFightButton','div',0x0,{'onclick'(){w=!![],k();},'innerText':$__language_Array__['d845c36ae0660b420c28569f62c721c4'],'onmouseover'(){Q['style']['filter']='brightness(110%)';},'onmouseout'(){Q['style']['filter']='';},'onmousedown'(){Q['style']['filter']='brightness(90%)';}},EDAll),oSym['addTask'](0xc8,function(){SetStyle(Q,{'pointer-events':'auto','opacity':'1'});for(let e of ArCard){let X=e['PName']['prototype'];X['SunNum']<=oS['SunNum']&&(e['SunReady']=0x1,$(e['DID'])['childNodes'][0x0]['style']['top']='0'),e['CDReady']=0x1,(X['Immediately']||!X['SunNum'])&&(e['Forbidden']=0x1,$(e['DID'])['childNodes'][0x0]['style']['top']='-60px');}g!==Infinity&&oSym['addTask'](0x1,function F(){g-=0x2;let H=c?c(g/I):(g/I)**1.1;if(H<=0x1/0x3)oFlagContent['update']({'MeterType':'LeftBar\x20RedBar','curValue':H,'animConfig':{'disabled':!![]}});else H<=0x2/0x3?oFlagContent['update']({'MeterType':'LeftBar\x20BlueBar','curValue':H,'animConfig':{'disabled':!![]}}):oFlagContent['update']({'curValue':H,'animConfig':{'disabled':!![]}});g<0x0?k(!![]):!w&&oSym['addTask'](0x2,F);});});});});function k(e=![]){g!==Infinity&&oFlagContent['hide']();let X=oS['GlobalVariables'];switch(oS['Chose']){case 0x1:CancelPlant();break;case-0x1:CancelShovel();}let F=['ChosePlant','GrowPlant','MonitorCard'];for(let H of F){X[H]&&(window[H]=X[H],delete X[H]);}ShovelPlant=X['ShovelPlant'],delete X['ShovelPlant'];for(let W of ArCard){W['PName']['prototype']['SunNum']>oS['SunNum']&&(W['SunReady']=0x0,$(W['DID'])['childNodes'][0x0]['style']['top']='60px'),W['CDReady']=0x0,W['Forbidden']&&delete W['Forbidden'];}BeginCool();if(e){i&&i();for(let x in oP['FlagToSumNum']['a2']){oP['FlagToSumNum']['a2'][x]*=0x2;}}oSym['addTask'](0x64,r=>{oFlagContent['init']({'fullValue':oP['FlagNum']-0x1,'curValue':0x0}),oP['Monitor'](oS['Monitor'],oS['UserDefinedFlagFunc']),PrepareGrowPlants(t=>{oP['AddZombiesFlag'](),oS['ControlFlagmeter']&&oFlagContent['show'](),oS['ControlFlagmeter']&&SetVisible($('dFlagMeterContent'));},![]);}),ClearChild(Q);}},'GrowWithoutSun'(g=!![],i){g?(oAudioManager['playMusic'](oS['StartGameMusic']),SetVisible($('tdShovel'),$('dFlagMeter'),$('dTop')),oS['ControlFlagmeter']&&oFlagContent['init']({'fullValue':oP['FlagNum']-0x1,'curValue':0x0}),oS['InitLawnMover'](),PrepareGrowPlants(w=>{oP['Monitor'](oS['Monitor'],oS['UserDefinedFlagFunc']);for(let I of ArCard){I['PName']['prototype']['SunNum']<=oS['SunNum']&&(I['SunReady']=0x1,$(I['DID'])['childNodes'][0x0]['style']['top']='0'),I['CDReady']=0x1;}AutoProduceSun(0x32),oSym['addTask'](0x4b0,Q=>{oP['AddZombiesFlag'](),oS['ControlFlagmeter']&&oFlagContent['show']();});})):i&&i();let c={'ChosePlant':((()=>{let w=window['ChosePlant'];return(I,Q)=>{if(Q+0x1>ArCard['length'])return;Q===-0x1&&(Q=0x9);if(ArCard[Q]['Forbidden'])return;w(I,Q);};})()),'GrowPlant'(w,I,Q,k,f){let G=oS['ChoseCard'],z=ArCard[G],e=z['PName'],F=e['prototype'],H=F['coolTime'];if(F['CanGrow'](w,k,f)){oAudioManager['playAudio'](oGd['$GdType'][k][f]===0x2?'plant_water':'plant'+Math['floor'](0x1+Math['random']()*0x2)),new e()['Birth'](I,Q,k,f,w),oS['SunNum']-=F['SunNum'];const W=$('imgGrowSoil');W['src']=GrowSoilImg,SetStyle(W,{'left':I+0x55+'px','top':Q-0x2d+'px','z-index':0x3*k+0x1,'visibility':'visible'}),oSym['addTask'](0x64,SetHidden,[W]),CancelPlant();}else(IsMobile||k<0x1||f<0x1||f>0x9)&&CancelPlant();},'MonitorCard':function(w){var I=ArCard['length'],Q;if(oS['Chose']<0x1)while(I--){!(w=ArCard[I])['Forbidden']&&((Q=w['PName']['prototype'])['SunNum']>oS['SunNum']&&!w['Forbidden']?(w['SunReady']&&(w['SunReady']=0x0),$(w['DID'])['childNodes'][0x0]['style']['top']='-60px'):(!w['SunReady']&&(w['SunReady']=0x1),$(w['DID'])['childNodes'][0x0]['style']['top']=0x0));}else while(I--){!(w=ArCard[I])['Forbidden']&&((Q=w['PName']['prototype'])['SunNum']>oS['SunNum']?w['SunReady']&&(w['SunReady']=0x0):!w['SunReady']&&(w['SunReady']=0x1));}ArCard['length']>0x0&&ViewPlantTitle(oS['MCID']);}};RewriteGlobalVariables(c);},'HeatWave'(){PlaySubtitle($__language_Array__['5e58dec4d4bf2344e13e09e799cf5867'],0x2bc);var g=NewEle('effect'+Math['random'](),'div','pointer-events:none;position:absolute;z-index:257;width:1900px;height:600px;background:rgb(0,0,0);opacity:0;',0x0,EDAll);oEffects['Animate'](g,{'background':'rgb(200,0,0)','opacity':0.08},0.2,'ease-out',i=>{oSym['addTask'](0xe10,c=>{oEffects['Animate'](g,{'opacity':0x0},0.4,'linear',ClearChild);});});for(let i=0x1;i<0x6;i++){for(let c=0x1;c<0xa;c++){CustomSpecial(oHeatFloor,i,c);}}},'IceStorm'(g,c,w=0x0){oAudioManager['playAudio']('frostbite');const I=Math['abs'](g-c),Q=['images/Props/Effect/snow-small.png','images/Props/Effect/snow-medium.png','images/Props/Effect/snow-large.png'],k=[[0x5dc,0x26b],[0x5dc,0x26f],[0x5dc,0x213]];let f=[];for(let z=0x0;z<Q['length'];z++){f[z]=new Image(),f[z]['src']=Q[z];}(function e(){let X=!![];for(let F=0x0;F<f['length'];F++){if(!f[F]['complete']){X=![];break;}}if(!X)oSym['addTask'](0x64,e);else{for(let H=0x0;H<Q['length'];H++){delete f[H];}G();}}());function G(){for(let X=0x0,F=(I+0x1)*0x19;X<F;X++){let H=(I+0x1)*(Math['random']()*0xa+0x5);H<0x19&&(H=Math['random']()*0xf+0x19);let W=Math['floor'](Math['random']()*Q['length']),x=NewImg('oSnowEffect'+Math['random'](),Q[W],'position:\x20absolute;transform:translateX('+oS['W']+'px);top:'+(Math['random']()*(I+0.5)*0x64+0x64*Math['min'](g,c)-0x14)+'px;z-index:25;height:'+H+'px;'),r=k[W][0x0]*H/k[W][0x1];x['style']['width']=r+'px',requestAnimationFrame(t=>{EDAll['append'](x),oSym['addTask'](0xc8*Math['random'](),()=>{oEffects['Animate'](x,{'transform':'translateX(-'+r+'px)'},(Math['random']()/0x2+0.5)/oSym['NowSpeed'],'ease-out',ClearChild);});});}for(let t=0x9;t>0x1&&w>0x0;t--){let U=hasPlants(!![],function(u){if(u['R']>=Math['min'](g,c)&&u['R']<=Math['max'](g,c)&&u['C']==t)return!![];return![];});for(let u=0x0;u<U['length']&&w>0x0;u++){let O=Math['floor'](Math['random']()*U['length']),D=U[O];if(!D){U['splice'](O,0x1);continue;}PlaceZombie(oIceBlock,D['R'],D['C'],0x0),oGd['killAll'](D['R'],D['C'],'JNG_TICKET_IceStorm'),U['splice'](O,0x1),w--;}}}},'Frostbite'(g,i,c=!![]){function w(){let I=typeof g==='function'?g():g,Q=typeof i==='function'?i():i;oAudioManager['playAudio']('frostbite'),oEffects['Animate'](NewEle('Frostbite'+Math['random'](),'div','z-index:\x2020;position:\x20absolute;width:\x20200px;height:\x20600px;left:\x20-200px;background:\x20-webkit-linear-gradient(left,\x20rgba(16,\x20234,\x20194,\x200)\x200px,\x20#00a1ff52\x2050%,\x20rgba(255,\x20255,\x20255,\x200)\x20100%);transform:\x20skewX(-25deg);',0x0,EDAll),{'left':oS['W']+'px'},'slow','ease-in',ClearChild),hasPlants(![],k=>{return k['getHurt']&&k['EName']!=='oBrains'&&k['EName']!=='oLawnCleaner'&&k['isPlant'];})['forEach'](k=>{k['getHurt'](null,0x0,Q);}),oSym['addTask'](I,w);};c?(oAudioManager['playMusic'](oS['StartGameMusic']),SetVisible($('tdShovel'),$('dFlagMeter'),$('dTop')),oS['InitLawnMover'](),oS['ControlFlagmeter']&&oFlagContent['init']({'fullValue':oP['FlagNum']-0x1,'curValue':0x0}),PrepareGrowPlants(function(){oP['Monitor'](oS['Monitor'],oS['UserDefinedFlagFunc']),BeginCool(),w(),PlaySubtitle($__language_Array__['0a54ad14d2eb67ebd6fc8a869f4803a0']),oSym['addTask'](0x4b0,function(){PlaySubtitle(),oP['AddZombiesFlag'](),oS['ControlFlagmeter']&&oFlagContent['show']();});})):w();},'WinWithScore'({scoreMax:g,specialZombiesList:specialZombiesList=[],specialPlantsList:specialPlantsList=[],zombieFunc:i,plantFunc:c,useZombieExtraScore:useZombieExtraScore=![],usePlantExtraScore:usePlantExtraScore=![]}){i=i||(G=>Math['floor']((G['HP']+G['OrnHP'])/0xd)),c=c||(G=>0x32);const w=new Map(),I=new Map();for(let G in specialZombiesList){for(let z of specialZombiesList[G]){w['set'](z,Number['parseFloat'](G));}}for(let e in specialPlantsList){for(let X of specialPlantsList[e]){I['set'](X,Number['parseFloat'](e));}}oS['ControlFlagmeter']=![],oFlagContent['init']({'MeterType':'LeftBar\x20GreenBar','HeadType':'NoneHead','canMoveHead':![],'fullValue':g})['show'](),SetBlock($('dGameScore'));let Q=0x0,k=$('scoreNum');$('scoreMax')['innerText']=g,Object['defineProperty'](oS,'GameScore',{'get':F=>Q,'set':F=>{F=Math['max'](Math['min'](F,g),0x0),k['innerText']=Q=F,oFlagContent['update']({'curValue':F});if(Q===g){delete oS['GameScore'];for(let H of $Z)H['ExplosionDie']();toWin();}},'configurable':!![]});function f(F){let H=F['id'],W=window[F['dataset']['jngConstructor']];if(!W)return;let x=W['prototype'],r=x['EName'];if(H['includes']('Z_0.')&&Number['parseFloat'](F['style']['left'])<oS['W']){let t=0x0;useZombieExtraScore&&w['has'](r)?t+=w['get'](r)+i(x):t+=w['has'](r)?w['get'](r):i(x);oS['GameScore']+=t;let U=NewEle('','a','position:absolute;color:#FFFF00;font-weight:bold;transform:scale(1);opacity:1;left:'+(Number['parseInt'](F['style']['left'])+W['prototype']['beAttackedPointL']+oS['EDAllScrollLeft']+'px')+';z-index:'+F['style']['zIndex']+';pointer-events:none;top:'+(Number['parseInt'](F['style']['top'])+0x28+'px')+';font-size:'+Math['min'](Math['max'](t/0x3e8,1.5),0x4)+'em;',{'innerText':t},EDAll);oEffects['Animate'](U,{'top':Number['parseInt'](F['style']['top'])-0x32+'px','opacity':0x0,'transform':'scale(1.5)'},0x2,'ease-out',ClearChild);}else H['includes']('P_0.')&&r!=='oRifter'&&(usePlantExtraScore&&I['has'](r)?oS['GameScore']+=I['get'](r)+c(x):oS['GameScore']+=I['has'](r)?I['get'](r):c(x));}addEventListenerRecord('jng-event-startgame',()=>{const F=H=>{IsGaming(0x1)&&H['forEach'](W=>W['removedNodes']['forEach'](f));};new MutationObserver(F)['observe'](EDPZ,{'childList':!![],'subtree':!![]});});},'IZombie'(){let g=hasPlants(![],f=>{return f['EName']==='oIBrains';}),c=g['length'],w=c;oS['ControlFlagmeter']=![],oFlagContent['init']({'MeterType':'LeftBar\x20GreenBar','HeadType':'NoneHead','canMoveHead':![],'fullValue':c})['show'](),SetBlock($('dGameScore'));let I=$('scoreNum');$('scoreMax')['innerText']=c;function Q(){oFlagContent['update']({'curValue':I['innerText']=c-w}),w<=0x0&&toWin();}for(let f=c-0x1;f>=0x0;f--){var k;let G=(k=g[f])===null||k===void 0x0?void 0x0:k['oriPrivateDie'];g[f]['PrivateDie']=(...z)=>{G&&G['bind'](g[f])(...z),w--,Q();};}},'oMirrorGame'(){let g=NewEle('','canvas','position:absolute;left:'+oS['EDAllScrollLeft']+'px;top:0;width:'+oS['W']+'px;height:600px',{'width':oS['W'],'height':0x258},EDAll),i=0x0,c=g['getContext']('2d'),w=new Map(),I=[GetX(0x5),GetMidY(0x3)],Q=[Math['cos'](i),Math['sin'](i)];function k(x){let r=[i,Q];i+=x,Q=[Math['cos'](i),Math['sin'](i)],!e()&&!X()?f():(i=r[0x0],Q=r[0x1]);}function f(){c['clearRect'](0x0,0x0,oS['W'],0x258),c['beginPath'](),c['strokeStyle']='black',c['lineWidth']=0xa,c['lineCap']='round',c['moveTo'](I[0x0]-Q[0x0]*0x3e8,I[0x1]-Q[0x1]*0x3e8),c['lineTo'](I[0x0]+Q[0x0]*0x3e8,I[0x1]+Q[0x1]*0x3e8),c['stroke'](),c['closePath']();}function G(r,t){let[U,u]=[GetX(t),GetMidY(r)],[O,D]=[I[0x0]-U,I[0x1]-u],V=-(O*Q[0x0]+D*Q[0x1]);[O,D]=[O+V*Q[0x0],D+V*Q[0x1]];let[Z,J]=[O*0x2+U,D*0x2+u];return GetR(J)*0x64+GetC(Z);}function z(x,r){if((I[0x0]-x)**0x2+(I[0x1]-r)**0x2-Math['abs']((I[0x0]-x)*Q[0x0]+(I[0x1]-r)*Q[0x1])**0x2<=0x640)return!![];return![];}function e(){let x,r=new Set(),t=![];return w['forEach']((U,u)=>{if(t)return;x=$P[u];if(r['has'](U['R']*0x64+U['C'])||!x){w['delete'](u);return;}if(z(GetX(x['C']),GetMidY(x['R']))){t=!![];return;oGd['killAll'](x['R'],x['C'],'JNG_TICKET_SuperPower'),r['add'](U['R']*0x64+U['C']),w['delete'](u);}}),t&&PlaySubtitle($__language_Array__['ca0b7d92359b9d0d99e789aa2ef15e80'],0xc8),t;}function X(){let x=new Set(),r,t=0x0;w['forEach']((U,u)=>{if(t>0x0)return;r=G($P[u]['R'],$P[u]['C']);let[O,D,V,Z]=[GetX(r%0x64),GetY(Math['floor'](r/0x64)),Math['floor'](r/0x64),r%0x64];if(!x['has'](r+'_'+$P[u]['PKind'])){x['add'](r+'_'+$P[u]['PKind']);if(!(Math['Clamp'](V,0x1,oS['R'])===V&Math['Clamp'](Z,0x1,oS['C'])===Z)){t=0x1;return;}}else{console['log'](V,Z),t=0x2;return;}if($P[U['id']]&&(V!==U['R']||Z!==U['C'])&&!$P[u]['CanGrow'](GetAP(O,D,V,Z)[0x0],V,Z)){console['log'](V,Z,0x2),t=0x2;return;}});if(t>0x0)return t===0x1?PlaySubtitle($__language_Array__['892af75bf17972721ce9ac90ef0f2cb7'],0xc8):PlaySubtitle($__language_Array__['d031619ea13b2c3373f8c2a1f735765a'],0xc8),!![];return w['forEach']((U,u)=>{let O=G($P[u]['R'],$P[u]['C']);if(!U||U['R']!==Math['floor'](O/0x64)||U['C']!==O%0x64){let D;!U?D=F(u,$P[u]['constructor'],Math['floor'](O/0x64),O%0x64):D=U['moveTo'](Math['floor'](O/0x64),O%0x64,{},!![]),!D?($P[u]['Die']('JNG_TICKET_SuperPower'),console['log'](U)):(w['set'](u,D),console['log']('set'));}}),![];}function F(x,r,t,U){if(Math['Clamp'](t,0x1,oS['R'])!==t||Math['Clamp'](U,0x1,oS['C'])!==U)return![];let u=CustomSpecial(r,t,U);u['isPlant']=0x0,u['canEat']=0x0,u['Stature']=-Infinity,u['canShovel']=![],console['log'](u['Ele']),EditCompositeStyle({'ele':u['Ele'],'styleName':'filter','addFuncs':[['hue-rotate','90deg'],['opacity','0.6']],'option':0x2});let O=u['Die'];return u['Die']=function(...D){O['bind'](u)(...D),!$P[u['id']]&&$P[x]&&($P[x]['Die'](...D),w['delete'](x));},u;}function H(x,r){return $P[x]&&!r['Tools']&&r['isPlant'];}function W(x){let r=x['id'],t=window[x['dataset']['jngConstructor']];if(!t)return;let U=t['prototype'],u=U['EName'],O,D=$P[r];if(H(r,D)&&(U===null||U===void 0x0?void 0x0:U['PKind'])!==undefined){let V=G(D['R'],D['C']);O=F(r,t,Math['floor'](V/0x64),V%0x64),w['set'](r,O);let Z=D['Die'];D['Die']=function(...J){Z['bind'](D)(...J),!$P[r]&&(w['get'](r)&&w['get'](r)['Die'](...J),w['delete'](r));},console['log']('nooooo');}}addEventListenerRecord('jng-event-startgame',()=>{const x=t=>{IsGaming(0x1)&&t['forEach'](U=>{U['addedNodes']['forEach'](W);});};new MutationObserver(x)['observe'](EDPZ,{'childList':!![],'subtree':!![]}),addEventListenerRecord('keydown',t=>{if(IsGaming(0x1)){if(t['which']===0x25)k(-0.1);else t['which']===0x27&&k(0.1);console['log'](0xe9);}});let r=GrowPlant;RewriteGlobalVariables({'GrowPlant'(t,U,u,O,D){var V,Z;console['log'](-(U-I[0x0])*Q[0x1],(u-I[0x1])*Q[0x0],U,u);let J=G(O,D),d=[Math['floor'](J/0x64),J%0x64];if(-(U-I[0x0])*Q[0x1]+(u-I[0x1])*Q[0x0]<0x0||z(U,u)||!(Math['Clamp'](d[0x0],0x1,oS['R'])===d[0x0]&&Math['Clamp'](d[0x1],0x1,oS['C'])===d[0x1])){PlaySubtitle($__language_Array__['858dbf0cea0e0686840a29026c56066c'],0xc8);IsMobile&&CancelPlant();return;}let y=((V=ArCard[oS['ChoseCard']])===null||V===void 0x0?void 0x0:V['PName'])||((Z=oS['ChoseCardObj'])===null||Z===void 0x0?void 0x0:Z['PName']),L=y['prototype'],[l]=GetAP(GetX(d[0x1]),GetY(d[0x0]),d[0x0],d[0x1]);if(!L['CanGrow'](l,O,D)){PlaySubtitle($__language_Array__['baa25d8226a71758ff776b90e392a913'],0xc8);IsMobile&&CancelPlant();return;}console['log']('GROW'),r(t,U,u,O,D);}},!![]);});},'oStg':{'canvas':null,'tmpCanvas':null,'tmpCtx':null,'cid':null,'offscreen':null,'ctx':null,'bullets':{},'hero':null,'boss':null,'screenRatio':0x2/0x3,'sq2':Math['sqrt'](0x2),'key':[],'SlowSpeed':0x0,'DrawMode':0x1,'checkTrigger'(g,i){return Math['pow'](g['x']-i['x'],0x2)+Math['pow'](g['y']-i['y'],0x2)<=Math['pow'](g['r']+i['r'],0x2);},'publicRGB':{'purple':[0x64,0x0,0x64],'blueWhite':[0x0,0x64,0x64],'darkBlue':[0x0,0x0,0x64],'green':[0x0,0x64,0x0],'red':[0x64,0x0,0x0],'orange':[0x64,0x32,0x0],'yellow':[0x64,0x64,0x0]},'publicPic':{'ball':'images/Props/Bullets/ball.png','rice':'images/Props/Bullets/rice.png','big':'images/Props/Bullets/Big.png'},'Variables':{},'publicImg':{},'inited':![],'drawing':![],'mousePos':[0x0,0x0],'mouseMovePos':[0x0,0x0],'heroPos':[0x0,0x0],'drawInterval':0x1,'Init0'(){let g=this;g['inited']=!![];for(let i in g){i!='Variables'&&(g['Variables'][i]=g[i]);}},'Init'(){let g=this;if(!g['inited'])g['Init0']();else{for(let I in g){I!='Variables'&&(g[I]=g['Variables'][I]);}g['bullets']={};}$User['LowPerformanceMode']&&(g['screenRatio']=0x1/0x2);const c='stg_'+Math['random']();g['cid']=c,g['canvas']=NewEle(c,'canvas','left:'+oS['FightingSceneLeft']+'px;width:'+oS['W']+'px;height:600px',{'height':0x258*g['screenRatio'],'width':oS['W']*g['screenRatio'],'className':'BgParticle'},EDAll),g['tmpCanvas']=NewEle(c+'_tmp','canvas','',{'height':0x258*g['screenRatio'],'width':oS['W']*g['screenRatio']}),g['tmpCtx']=g['tmpCanvas']['getContext']('2d',{'willReadFrequently':!![]});$User['LowPerformanceMode']&&(g['drawInterval']=0x2);g['canvas']['transferControlToOffscreen']?(g['offscreen']=g['canvas']['transferControlToOffscreen'](),g['ctx']=g['offscreen']['getContext']('2d')):g['ctx']=g['canvas']['getContext']('2d');EBody['onkeydown']=Q=>{g['key'][Q['which']]=!![];},EBody['onkeyup']=Q=>{g['key'][Q['which']]=![];},$('dFightingScene')['addEventListener']('touchstart',w,![]),$('dFightingScene')['addEventListener']('touchmove',w,![]),$('dFightingScene')['addEventListener']('touchend',w,![]);function w(Q){let k=Q['targetTouches'][0x0];if(Q['cancelable'])Q['preventDefault']();switch(Q['type']){case'touchstart':Q['targetTouches']['length']==0x1&&(g['key'][0x1]=!![],g['mousePos']=[k['clientX'],k['clientY']],g['mouseMovePos']=[k['clientX'],k['clientY']]);g['hero']&&g['hero']['CanDie']&&Q['targetTouches']['length']>0x1&&(g['key'][0x58]=!![]);break;case'touchmove':g['key'][0x1]&&g['hero']&&(g['mouseMovePos']=[k['clientX'],k['clientY']]);break;case'touchend':Q['targetTouches']['length']==0x0&&(g['key'][0x1]=![]);}}!IsHttpEnvi&&/file:/['test'](location['href'])&&(g['DrawMode']=0x0);for(let Q of g['publicPic']){g['publicImg'][Q]=new Image(),g['publicImg'][Q]['src']=Q;}g['taskStart']();},'getAngle'(g,i,c,w,I=0x0){let Q=g-c,k=i-w,f=Math['sqrt'](Q*Q+k*k);return I===0x0?-(Math['asin'](k/f)/Math['PI']*0xb4):Math['asin'](k/f);},'getAngle2'(g,i,c,w){let I=c-g,Q=w-i,k=Math['atan2'](Q,I);return k/Math['PI']*0xb4;},'paintTask'(){let g=this,i=0x0;g['drawing']=!![];function c(){if(oSym['Timer']){if(++i>=g['drawInterval']){i=0x0,g['ctx']['setTransform'](0x1,0x0,0x0,0x1,0x0,0x0),g['ctx']['clearRect'](0x0,0x0,oS['W']*g['screenRatio'],0x258*g['screenRatio']);g['hero']&&g['hero']['paint'](g['hero']);for(let w in g['bullets']){g['bullets'][w]['paint']();}}oSym['addTask'](0x2,c);}else g['drawing']=![];}c();},'taskStart'(g){!g&&(g=this);!g['drawing']&&g['paintTask']();g['hero']&&g['hero']['update']();{for(let i in g['bullets']){g['bullets'][i]['update']();}};oSym['addTask'](0x1,g['taskStart'],[g]);},'getImg'(g,c,w,I=![]){let Q=this;if(I===![]){if(Q['publicImg'][g])return Q['publicImg'][g];return Q['publicImg'][g]=new Image(),Q['publicImg'][g]['src']=g,publicImg[g];}c*=Q['screenRatio'],w*=Q['screenRatio'];let k={'width':Math['round'](c/0x5),'height':Math['round'](w/0x5)};if(Q['publicImg'][g+'_'+k['width']+'_'+k['height']+'_'+I])return Q['publicImg'][g+'_'+k['width']+'_'+k['height']+'_'+I];!Q['publicImg'][g]&&(Q['publicImg'][g]=new Image(),Q['publicImg'][g]['src']=g);g=Q['publicImg'][g],Q['tmpCtx']['clearRect'](0x0,0x0,c,w),Q['tmpCtx']['drawImage'](g,0x0,0x0,c,w);let f=Q['tmpCtx']['getImageData'](0x0,0x0,c,w),G=f['data'];for(let e=0x0;e<G['length'];e+=0x4){G[e+0x3]!=0x0&&(G[e+0x0]=G[e+0x0]+I[0x0],G[e+0x1]=G[e+0x1]+I[0x1],G[e+0x2]=G[e+0x2]+I[0x2]);}let z=NewEle('','canvas','',{'height':w,'width':c});return z['getContext']('2d')['putImageData'](f,0x0,0x0),Q['publicImg'][g['src']+'_'+k['width']+'_'+k['height']+'_'+I]=z,z;},'RotatePaint'(g,i,c,w,I,Q=0x0,k=0x1,f=0x1){let G=this,z=[Math['round']((i+w/0x2)*G['screenRatio']),Math['round']((c+I/0x2)*G['screenRatio'])],e=G['ctx'];k!=0x1&&(e['globalAlpha']=k),e['setTransform'](0x1,0x0,0x0,0x1,z[0x0],z[0x1]),e['rotate'](Q),e['drawImage'](g,Math['round'](-w/0x2*G['screenRatio']),Math['round'](-I/0x2*G['screenRatio']),Math['round'](w*G['screenRatio']),Math['round'](I*G['screenRatio'])),k!=0x1&&(e['globalAlpha']=0x1);},'Obj':{'CTrigger':NewO({'Birth'(g,i,c){this['x']=g,this['y']=i,this['r']=c;}}),'CHero':NewO({'x':0x0,'y':0x0,'CanDie':!![],'width':0x0,'height':0x0,'dom':null,'bomb':![],'Birth'(g,i,c,w,I,Q,k=![]){let f=this;return k===!![]&&(k=0x4b),[f['x'],f['y'],f['width'],f['height'],f['dom'],f['bomb']]=[i,c,w,I,g,k],f['Trigger']=new oMiniGames['oStg']['Obj']['CTrigger'](),f['GrazeTrigger']=new oMiniGames['oStg']['Obj']['CTrigger'](),f['GrazeTrigger']['Birth'](f['x']+f['width']/0x2,f['y']+f['height']/0x2,0xf*Q),f['Trigger']['Birth'](f['x']+f['width']/0x2,f['y']+f['height']/0x2,Q),oGd['del']($P[g['id']]),oMiniGames['oStg']['hero']=f,f;},'move'(g){let c;if(!(c=$P[g['dom']['id']]))return;let w=oMiniGames['oStg'],I=w['key'][0x10]?0x2:0x4,Q=[-0x1,0x0,0x1,0x0],k=[0x0,-0x1,0x0,0x1],G=[0x0,0x0];for(let z=0x0;z<0x4;z++){w['key'][z+0x25]&&(G[0x0]+=Q[z]*I,G[0x1]+=k[z]*I);}w['key'][0x58]&&g['bomb']&&g['ThrowBomb'](g);G[0x0]*G[0x1]!=0x0&&(G[0x0]/=w['sq2'],G[0x1]/=w['sq2']);w['key'][0x1]&&(G[0x0]=w['mouseMovePos'][0x0]-w['mousePos'][0x0],G[0x1]=w['mouseMovePos'][0x1]-w['mousePos'][0x1],(G[0x0]!=0x0||G[0x1]!=0x0)&&(w['mousePos']=w['mouseMovePos']));g['x']+G[0x0]<GetX(0x1)+0xa-g['width']&&(G[0x0]=GetX(0x1)+0xa-g['width']-g['x']);g['x']+G[0x0]>GetX(0x9)-g['width']&&(G[0x0]=GetX(0x9)-g['width']-g['x']);g['y']+G[0x1]<GetY(0x1)-0x1e-g['height']&&(G[0x1]=GetY(0x1)-0x1e-g['height']-g['y']);g['y']+G[0x1]>GetY(oS['R'])-g['height']&&(G[0x1]=GetY(oS['R'])-g['height']-g['y']);g['x']+=G[0x0],g['Trigger']['x']+=G[0x0],g['y']+=G[0x1],g['Trigger']['y']+=G[0x1],[g['GrazeTrigger']['x'],g['GrazeTrigger']['y']]=[g['Trigger']['x'],g['Trigger']['y']],g['dom']['style']['left']=g['x']+'px',g['dom']['style']['top']=g['y']+'px';{c['pixelLeft']+=G[0x0],c['pixelRight']+=G[0x0],c['pixelTop']+=G[0x1],c['pixelBottom']+=G[0x1],c['R']=GetR(c['pixelBottom']),c['C']=GetC(c['pixelRight']),c['zIndex']=0x3*c['R'],c['oTrigger']&&oT['delP'](c),c['InitTrigger'](c,c['id'],c['R'],c['C'],c['AttackedLX']=c['pixelLeft']+c['beAttackedPointL'],c['AttackedRX']=c['pixelLeft']+c['beAttackedPointR']),g['dom']['style']['zIndex']=c['zIndex'];}},'ThrowBomb'(g){let i=oMiniGames['oStg'];if(!g['CanDie'])return;i['key'][0x58]=![];if(oS['SunNum']<(isNaN(g['bomb'])?0x4b:g['bomb'])){SunNumWarn();return;}CustomSpecial(oDoomShroom,0x3,0x6),oS['SunNum']-=isNaN(g['bomb'])?0x4b:g['bomb'],g['CanDie']=![],g['dom']['style']['filter']='brightness(50%)',oMiniGames['oStg']['canvas']['style']['filter']='brightness(120%)',oSym['addTask'](0x1e,function(){oMiniGames['oStg']['bullets']={},oMiniGames['oStg']['canvas']['style']['filter']='';}),oSym['addTask'](0x12c,function(){g['CanDie']=!![],g['dom']['style']['filter']='';});},'paint'(g){let i=oMiniGames['oStg']['screenRatio'],c=oMiniGames['oStg']['ctx'];c['lineWidth']=0x2*i,c['strokeStyle']='red',c['beginPath'](),c['arc'](Math['round'](g['Trigger']['x']*i),Math['round'](g['Trigger']['y']*i),g['Trigger']['r']*i,0x0,Math['PI']*0x2,!![]),c['closePath'](),c['fillStyle']='white',c['fill'](),c['stroke']();},'update'(){let g=this;g['move'](g);},'Die'(){let g=this;oSym['addTask'](0xa,c=>{if(!g['CanDie'])return;oAudioManager['playAudio']('BulletDie'),g['CanDie']=![],g['dom']['style']['filter']='brightness(50%)',oMiniGames['oStg']['canvas']['style']['filter']='brightness(120%)',oSym['addTask'](0x1e,function(){oMiniGames['oStg']['bullets']={},oMiniGames['oStg']['canvas']['style']['filter']='';}),oSym['addTask'](0x12c,function(){g['CanDie']=!![],g['dom']['style']['filter']='';});oS['SunNum']<$P[g['dom']['id']]['SunNum']?(oS['SunNum']=0x0,toOver(0x2)):oS['SunNum']-=$P[g['dom']['id']]['SunNum'];for(let w of $Z){w['getHit0'](w,0x320);}});}}),'CBullet':NewO({'dx':0x0,'dy':0x0,'angle':0x0,'speed':0x1,'grazed':0x0,'liveTime':0x0,'_task_index':0x0,'picAngle':0x0,'task':[],'Birth'(g={}){var i;let c=this,w=oMiniGames['oStg'];return c['id']='B_'+Math['random'](),c['x']=g['x'],c['y']=g['y'],c['width']=g['width'],c['height']=g['height'],g['speed']&&(c['speed']=g['speed']),g['angle']&&(c['angle']=g['angle']),g['r']&&(c['r']=g['r']),g['task']&&(c['task']=g['task']),c['FadeTime']=(i=g['FadeTime'])!==null&&i!==void 0x0?i:g['speed']>0x4?0xf:0x1e,c['Trigger']=new w['Obj']['CTrigger'](),c['Trigger']['Birth'](c['x']+c['width']/0x2,c['y']+c['height']/0x2,g['r']?g['r']:Math['min'](c['width']-0x1,c['height']-0x1)),g['angle']=='hero'&&(g['angle']=['hero',0x0]),w['hero']&&g['angle']instanceof Array&&g['angle'][0x0]=='hero'&&(c['angle']=oMiniGames['oStg']['getAngle2'](c['Trigger']['x'],c['Trigger']['y'],w['hero']['Trigger']['x'],w['hero']['Trigger']['y'])+g['angle'][0x1]),(c['angle']===0x0||c['angle'])&&(c['picAngle']=Math['PI']/0x2+c['angle']*Math['DegToRad']),c['FinalDrawMode']=!(w['DrawMode']===0x0||!g['rgb']),c['img']=!c['FinalDrawMode']?w['getImg'](g['pic']):w['getImg'](g['pic'],g['width'],g['height'],g['rgb']),w['bullets'][c['id']]=c,c['_defSpd']=[Math['cos'](c['AngleToRad'](c['angle'])),Math['sin'](c['AngleToRad'](c['angle']))],c['move']=function(){c['dx']=c['_defSpd'][0x0]*c['speed'],c['dy']=c['_defSpd'][0x1]*c['speed'];},g['move']&&(c['move']=g['move']),c;},'AngleToRad'(g){return g*Math['PI']/0xb4;},'update':function(){let g=this,i=oMiniGames['oStg'];g['move'](),g['x']+=g['dx'],g['y']+=g['dy'],g['Trigger']['x']+=g['dx'],g['Trigger']['y']+=g['dy'],g['dx']=g['dy']=0x0,g['liveTime']++;g['task']['length']>g['_task_index']&&g['liveTime']>=g['task'][g['_task_index']][0x0]&&g['task'][g['_task_index']++][0x1](g);if(g['x']>oS['W']||g['x']+g['width']<0x0||g['y']+g['height']<-0x32||g['y']>0x28a){delete i['bullets'][g['id']];return;}if(i['hero']){if(!g['grazed']&&i['checkTrigger'](g['Trigger'],i['hero']['GrazeTrigger'])){if($User['LowPerformanceMode'])oS['SunNum']+=0x1;else{let c=AppearSun(g['Trigger']['x'],g['Trigger']['y'],0x1,0x0,0x1e-Math['random']()*0xa);oSym['addTask'](0xa,function(){ClickSun(c['id']);});}g['grazed']=!![];return;}if(i['checkTrigger'](g['Trigger'],i['hero']['Trigger'])){i['hero']['Die'](),delete i['bullets'][g['id']];return;}}},'Die'(){delete oMiniGames['oStg']['bullets'][this['id']];},'paint':function(){let g=this;g['x']!==NaN&&g['y']!==NaN&&(!$User['LowPerformanceMode']&&g['liveTime']<g['FadeTime']?oMiniGames['oStg']['RotatePaint'](g['img'],g['x']+g['width']/0x2*(g['FadeTime']-g['liveTime'])/g['FadeTime'],g['y']+g['height']/0x2*(g['FadeTime']-g['liveTime'])/g['FadeTime'],g['width']/g['FadeTime']*g['liveTime'],g['height']/g['FadeTime']*g['liveTime'],g['picAngle'],g['liveTime']/g['FadeTime']):oMiniGames['oStg']['RotatePaint'](g['img'],g['x'],g['y'],g['width'],g['height'],g['picAngle']));}})}},'oZuma':{'InterpSampleNum':0x2710,'ALPHA':0x0,'passedTime':0x0,'colorCount':0x2,'Variables':{},'canvas':null,'distancesLenArr':null,'distancePrefixSumArr':null,'Init0'(){let g=this;g['inited']=!![];for(let i in g){i!='Variables'&&(g['Variables'][i]=g[i]);}},'Init'(){let g=this;if(!g['inited'])g['Init0']();else for(let i in g){i!='Variables'&&(g[i]=g['Variables'][i]);}g['Samples']=[],g['Distances']=[],g['BallHeads']=[],g['BallTails']=[],g['totalDistance']=[],g['ballColorCount']=[],g['OtherUpdates']=new Set(),g['canvas']=NewEle('','canvas','position:absolute;left:'+oS['EDAllScrollLeft']+'px;top:0;width:'+oS['W']+'px;height:600px;',{'width':oS['W'],'height':0x258},EDAll),g['speedConfigs']={'maxSpeed':0x10,'maxGapBackwardSpeed':0x10,'accelerationNormalMove':0.04,'accelerationCollide':0.3,'accelerationGapBackward':0.05,'leastBorder':0.2,'slowBorder':0.5,'emergencyBorder':0.95};},'AddBallIntoList'(g,i,c=null,w=0x0){let I=this,Q;return!i?(Q={'nextBall':c,'lastBall':null,'ballObj':g,'realPos':null},c&&(c['lastBall']=Q),I['BallHeads'][w]=Q):(Q={'nextBall':c||i['nextBall'],'lastBall':i,'ballObj':g,'realPos':null},i['nextBall']=Q,Q['nextBall']&&(Q['nextBall']['lastBall']=Q)),!Q['nextBall']&&(I['BallTails'][w]=Q),Q;},'DeleteABall'(g){let i=this;g['lastBall']&&(!g['nextBall']&&(i['BallTails'][g['ballObj']['lane']]=g['lastBall']),g['lastBall']['nextBall']=g['nextBall']),g['nextBall']&&(!g['lastBall']&&(i['BallHeads'][g['ballObj']['lane']]=g['nextBall']),g['nextBall']['lastBall']=g['lastBall']);},'Update'(){let g=this,i=new Date(),c=0x0,w=i,I=g['canvas']['getContext']('2d');g['context']=I;let Q=g['speedConfigs']['maxSpeed'],k=g['speedConfigs']['accelerationNormalMove'],f=0x2,G=g['Distances']['length'],z=g['distancesLenArr'],e=g['distancePrefixSumArr'];function X(){w=new Date(),c=(w-i)*oSym['NowSpeed']/0x64,i=w,oSym['Timer']&&!document['hidden']?(W(),F(),requestAnimationFrame(X)):oSym['addTask'](0x1,()=>{i=new Date(),X();});};function F(){I['clearRect'](0x0,0x0,oS['W'],0x258);function x(r,t=-0x1,U=0x0){t<0x0&&(console['log']('searching\x20for\x20Distance\x20Area\x20Error'),t=0x0);for(let u=t;u<=z[U];u++){if(e[U][u]>=r&&(u===0x0||e[U][u-0x1]<=r))return u;}return-0x1;}for(let r=0x0;r<G;r++){let t=g['BallHeads'][r];if(!t)continue;let U=0x0,u=null;while(t){u=t['ballObj'],u['Update'](c);let O=null;if(u['s']<0x0)O=g['Samples'][r][0x0];else{(U=x(u['s'],U,r))===-0x1&&(U=x(u['s'],U,r));if(U>=z[r]){O=g['Samples'][r][z[r]],g['DeleteABall'](t),t=t['nextBall'];continue;}else{let D=U;O=g['XYLerpUnClamped'](g['Samples'][r][D],g['Samples'][r][D+0x1],(u['s']-(D-0x1<0x0?0x0:e[r][D-0x1]))/g['Distances'][r][D]),u['insertOriPos']&&(O=g['XYLerpUnClamped'](O,u['insertOriPos'],u['insertingTime']/u['defInsertTime']));}}t['realPos']=O,u['Paint'](I,O,u),t=t['nextBall'];}if(g['BallTails'][r]){let V=g['BallTails'][r]['ballObj'];if(V['s']<g['totalDistance'][r]*g['speedConfigs']['leastBorder'])f=0x2;else{if(V['s']>g['totalDistance'][r]*g['speedConfigs']['emergencyBorder'])f=0.2;else V['s']>g['totalDistance'][r]*g['speedConfigs']['slowBorder']?f=0.5:f=0x1;}g['speedConfigs']['maxSpeed']=Q*f,g['speedConfigs']['accelerationNormalMove']=(f<0x1?0x1/Math['pow'](f,0x2):f)*k;}for(let Z of g['OtherUpdates']){Z['Update'](c);}}}let H=0x0;function W(){for(let x=0x0;x<G;x++){let r=g['BallHeads'][x];while(r&&r['ballObj']['s']>=r['ballObj']['r']*0x2&&r['ballObj']['velocity']>0x0){let t=new g['Obj']['Ball']()['Birth'](Math['min'](r['ballObj']['r'],r['ballObj']['s']-r['ballObj']['r']*0x2),null,r,Math['floor'](Math['random']()*g['colorCount']),x);r['ballObj']['s']>r['ballObj']['r']*0x3&&(r['ballObj']['connectingLast']=![]),H++,r=r['lastBall'];}}}X();},'LineIntersect'(g,i,c,w){return Math['max'](g['x'],i['x'])>=Math['min'](c['x'],w['x'])&&Math['min'](g['x'],i['x'])<=Math['max'](c['x'],w['x'])&&Math['max'](g['y'],i['y'])>=Math['min'](c['y'],w['y'])&&Math['min'](g['y'],i['y'])<=Math['max'](c['y'],w['y'])?((c['x']-g['x'])*(i['y']-g['y'])-(c['y']-g['y'])*(i['x']-g['x']))*((w['x']-g['x'])*(i['y']-g['y'])-(w['y']-g['y'])*(i['x']-g['x']))<=0x0&&((g['x']-c['x'])*(w['y']-c['y'])-(g['y']-c['y'])*(w['x']-c['x']))*((i['x']-c['x'])*(w['y']-c['y'])-(i['y']-c['y'])*(w['x']-c['x']))<=0x0?!![]:![]:![];},'SubVector'(g,i){return{'x':g['x']-i['x'],'y':g['y']-i['y']};},'AddVector'(g,i){return{'x':g['x']+i['x'],'y':g['y']+i['y']};},'MultiVector'(g,i){return{'x':g['x']*i,'y':g['y']*i};},'Cross'(g,i){return g['x']*i['y']-g['y']*i['x'];},'GetCrossPoint'(g,i,c,w){let I=this['SubVector'](w,c),Q=Math['abs'](this['Cross'](I,this['SubVector'](g,c))),k=Math['abs'](this['Cross'](I,this['SubVector'](i,c))),f=Q/(Q+k);return this['AddVector'](g,this['MultiVector'](this['SubVector'](i,g),f));},'MakeSamples'(g,c=0x0){function w(H,W){return Math['PI']-Math['abs']((H-W)%(0x2*Math['PI'])-Math['PI']);}let I=[],Q=[],k=0x0,f=0x0,G=-0x1bf52,z=this['InterpSampleNum'];for(let H=0x0;H<=z;H++){let W=null,x=this['CSplineInterp'](g,H/z,this['ALPHA']);if(!(G<-0x168||H===0x0||H===z||Math['abs'](w(G,W=Math['atan2'](x['y']-I[f-0x1]['y'],x['x']-I[f-0x1]['x'])))>=0.08))continue;G=W,f>0x0&&(Q['push'](Math['hypot'](I[f-0x1]['x']-x['x'],I[f-0x1]['y']-x['y'])),k+=Q[f-0x1]),I['push'](x),f++;}this['Samples'][c]=I,this['Distances'][c]=Q,this['totalDistance'][c]=k;let e=this['Distances']['length'],X=[],F=[];for(let r=0x0;r<e;r++){X[r]=this['Distances'][r]['length'],F[r]=[this['Distances'][r][0x0]];for(let t=0x1;t<X[r];t++){F[r][t]=F[r][t-0x1]+this['Distances'][r][t];}F[r][X[r]]=Infinity;}this['distancesLenArr']=X,this['distancePrefixSumArr']=F;},'GetKnotInterval'(g,i,c=0.5){return Math['pow']((g['x']-i['x'])**0x2+(g['y']-i['y'])**0x2,0.5*c);},'CSplineInterp'(g,i,c=0.5){i=Math['Clamp'](i,0x0,0x2);let w=g['length']-0x3,I=Math['min'](Math['floor'](i*w),w-0x1);i=i*w-I;let Q=g[I],k=g[I+0x1],f=g[I+0x2],G=g[I+0x3],z=0x0,e=this['GetKnotInterval'](Q,k,c),X=this['GetKnotInterval'](k,f,c)+e,F=this['GetKnotInterval'](f,G,c)+X,H=Math['LerpUnclamped'](e,X,i),W=this['Remap'](z,e,Q,k,H),x=this['Remap'](e,X,k,f,H),r=this['Remap'](X,F,f,G,H),U=this['Remap'](z,X,W,x,H),O=this['Remap'](e,F,x,r,H);return this['Remap'](e,X,U,O,H);},'Remap'(g,i,w,I,Q){return{'x':((i-Q)*w['x']+(Q-g)*I['x'])/(i-g),'y':((i-Q)*w['y']+(Q-g)*I['y'])/(i-g)};},'XYLerpUnClamped'(g,i,c,w=![]){if(w)g['x']=g['x']+(i['x']-g['x'])*c,g['y']=g['y']+(i['y']-g['y'])*c;else return{'x':g['x']+(i['x']-g['x'])*c,'y':g['y']+(i['y']-g['y'])*c};},'Obj':{'Ball':NewO({'r':0x14,'showR':0x14,'velocity':0x0,'connectingLast':![],'color':0x0,'listObj':null,'insertingTime':0x0,'defInsertTime':0x1,'insertOriPos':null,'onCollide':!![],'destroyed':![],'comboTime':0x1,'__tmp_destroy_time':0x1,'__tmp_combo__':null,'PicArr':((()=>{let g=[];return['images/Plants/WallNut/0.webp','images/Plants/FlowerPot/FlowerPot.png']['forEach'](c=>{let w=new Image();w['src']=c,g['push'](w);}),g;})()),'Birth'(g,i=null,c=null,w=0x0,I=0x0){return this['s']=g,this['listObj']=oMiniGames['oZuma']['AddBallIntoList'](this,i,c,I),this['lane']=I,this['color']=w,!oMiniGames['oZuma']['ballColorCount'][this['color']]&&(oMiniGames['oZuma']['ballColorCount'][this['color']]=0x0),oMiniGames['oZuma']['ballColorCount'][this['color']]++,this;},'insertAnimation'(){return this['insertingTime']=this['defInsertTime'],this;},'insertAnimationUpdate'(g){this['insertingTime']-=g,this['insertingTime']=Math['max'](0x0,this['insertingTime']),this['r']=Math['Lerp'](0x14,0x0,this['insertingTime']/this['defInsertTime']),this['insertingTime']===0x0&&(this['insertOriPos']=null,this['DiffuseDestroySameColor'](this));},'Paint'(g,i,c){this['destroyed']?g['globalAlpha']=0.5:g['globalAlpha']=0x1,oMiniGames['oZuma']['context']['fillStyle']=['red','green'][c['color']],oMiniGames['oZuma']['context']['fillRect'](i['x']-c['showR'],i['y']-c['showR'],0x2*c['showR'],0x2*c['showR']);},'Update'(g){this['insertingTime']>0x0&&this['insertAnimationUpdate'](g),this['Move'](g),this['destroyed']&&(this['__tmp_destroy_time']-=g)<=0x0&&this['Destroy']();},'Move'(g=0x1){let i=this;if(!i['listObj']['lastBall']){let I=i['velocity'],Q=0x0;i['velocity']<0x0?i['velocity']+oMiniGames['oZuma']['speedConfigs']['accelerationCollide']*g>0x0?(Q=Math['abs'](i['velocity']/oMiniGames['oZuma']['speedConfigs']['accelerationCollide']),i['velocity']=0x0):i['velocity']+=oMiniGames['oZuma']['speedConfigs']['accelerationCollide']*g:(i['comboTime']=0x1,i['velocity']>oMiniGames['oZuma']['speedConfigs']['maxSpeed']?i['velocity']-oMiniGames['oZuma']['speedConfigs']['accelerationNormalMove']*g<oMiniGames['oZuma']['speedConfigs']['maxSpeed']?(Q=(i['velocity']-oMiniGames['oZuma']['speedConfigs']['maxSpeed'])/oMiniGames['oZuma']['speedConfigs']['accelerationNormalMove'],i['velocity']=oMiniGames['oZuma']['speedConfigs']['maxSpeed']):i['velocity']-=oMiniGames['oZuma']['speedConfigs']['accelerationNormalMove']*g:i['velocity']+oMiniGames['oZuma']['speedConfigs']['accelerationNormalMove']*g>oMiniGames['oZuma']['speedConfigs']['maxSpeed']?(Q=(oMiniGames['oZuma']['speedConfigs']['maxSpeed']-i['velocity'])/oMiniGames['oZuma']['speedConfigs']['accelerationNormalMove'],i['velocity']=oMiniGames['oZuma']['speedConfigs']['maxSpeed']):i['velocity']+=oMiniGames['oZuma']['speedConfigs']['accelerationNormalMove']*g),i['s']+=(I+i['velocity'])/0x2*Q+i['velocity']*(g-Q),i['s']=Math['max'](i['s'],0x0),i['listObj']['nextBall']&&i['s']===0x0&&i['velocity']<0x0&&(oMiniGames['oZuma']['DeleteABall'](i['listObj']),i['listObj']['nextBall']&&(i['listObj']['nextBall']['ballObj']['velocity']=i['velocity'],i['listObj']['nextBall']['ballObj']['comboTime']=i['comboTime']));}else{!i['connectingLast']&&i['s']-i['listObj']['lastBall']['ballObj']['s']<=i['r']+i['listObj']['lastBall']['ballObj']['r']&&(i['connectingLast']=!![]);if(i['connectingLast']){if(i['velocity']!=0x0){var c,w;(c=i['listObj'])!==null&&c!==void 0x0&&(w=c['lastBall'])!==null&&w!==void 0x0&&w['lastBall']&&i['DiffuseDestroySameColor'](i),i['speedConveyBack'](i,i['velocity']);}i['velocity']=0x0,i['s']=i['listObj']['lastBall']['ballObj']['s']+i['listObj']['lastBall']['ballObj']['r']+i['r'],i['comboTime']=0x1;}else{console['log'](0xf4);let k=i['velocity'],f=g;i['listObj']['lastBall']['ballObj']['color']===i['color']?i['velocity']-oMiniGames['oZuma']['speedConfigs']['accelerationGapBackward']*i['comboTime']*g<-oMiniGames['oZuma']['speedConfigs']['maxGapBackwardSpeed']?(f=Math['abs']((-oMiniGames['oZuma']['speedConfigs']['maxGapBackwardSpeed']-i['velocity'])/(oMiniGames['oZuma']['speedConfigs']['accelerationGapBackward']*i['comboTime'])),i['velocity']=-oMiniGames['oZuma']['speedConfigs']['maxGapBackwardSpeed']):i['velocity']-=oMiniGames['oZuma']['speedConfigs']['accelerationGapBackward']*i['comboTime']*g:i['velocity']<0x0&&(i['velocity']+oMiniGames['oZuma']['speedConfigs']['accelerationGapBackward']*i['comboTime']*0x3*g>0x0?(f=Math['abs'](-i['velocity'])/(oMiniGames['oZuma']['speedConfigs']['accelerationGapBackward']*i['comboTime']*0x3),i['velocity']=0x0):i['velocity']+=oMiniGames['oZuma']['speedConfigs']['accelerationGapBackward']*i['comboTime']*0x3*g),i['s']+=(k+i['velocity'])/0x2*f+i['velocity']*(g-f);}}},'DiffuseDestroySameColor'(g){var i;let c=g,w=[g['listObj']];while(c['connectingLast']&&c['listObj']['lastBall']&&c['color']===c['listObj']['lastBall']['ballObj']['color']){w['push'](c['listObj']['lastBall']),c=c['listObj']['lastBall']['ballObj'];}c=g,console['log']((i=c['listObj'])===null||i===void 0x0?void 0x0:i['nextBall']);while((I=c['listObj'])!==null&&I!==void 0x0&&(Q=I['nextBall'])!==null&&Q!==void 0x0&&(k=Q['ballObj'])!==null&&k!==void 0x0&&k['connectingLast']&&c['color']===c['listObj']['nextBall']['ballObj']['color']){var I,Q,k;w['push'](c['listObj']['nextBall']),c=c['listObj']['nextBall']['ballObj'];}if(w['length']<0x3){g['comboTime']=0x1;return;}w['forEach'](f=>{f['ballObj']['beCollidedDestroyAnimation'](f['ballObj']);});},'speedConveyBack'(g,i){let c=g['listObj']['lastBall'];while(c&&c['ballObj']['connectingLast']){c=c['lastBall'];}console['log'](g['comboTime']),c&&(c['ballObj']['velocity']>0x1&&(c['ballObj']['velocity']=Math['sqrt'](c['ballObj']['velocity'])),c['ballObj']['velocity']+=i*Math['pow'](Math['Clamp'](g['comboTime'],0x1,0x4),0x1/0x3));},'CheckCollide'(g){let i=this;if(!i['listObj']['realPos']||!i['onCollide'])return![];return(g['x']-i['listObj']['realPos']['x'])**0x2+(g['y']-i['listObj']['realPos']['y'])**0x2<0x4*i['r']*i['r'];},'beCollidedDestroyAnimation'(g){if(g['destroyed'])return;g['__tmp_combo__']=g['comboTime'],g['destroyed']=!![],g['onCollide']=![];},'Destroy'(){var g;(g=this['listObj'])!==null&&g!==void 0x0&&g['nextBall']&&(this['listObj']['nextBall']['ballObj']['connectingLast']=![],this['listObj']['nextBall']['ballObj']['comboTime']=Math['max'](this['listObj']['nextBall']['ballObj']['comboTime'],this['__tmp_combo__']+0x1),this['listObj']['nextBall']['ballObj']['__tmp_combo__']&&(this['listObj']['nextBall']['ballObj']['__tmp_combo__']=Math['max'](this['listObj']['nextBall']['ballObj']['__tmp_combo__'],this['__tmp_combo__']))),oMiniGames['oZuma']['DeleteABall'](this['listObj']),oMiniGames['oZuma']['ballColorCount'][this['color']]--;}}),'BallShooted':NewO({'speed':0x80,'r':0x14,'liveTime':0x0,'chkIndex':0x0,'Birth'(g,i,c,w=0x0){return this['PicArr']=oMiniGames['oZuma']['Obj']['Ball']['prototype']['PicArr'],this['oriX']=this['x']=g,this['oriY']=this['y']=i,this['color']=w,this['angle']=c,this['tmp_cossin']=[Math['cos'](this['angle']),Math['sin'](this['angle'])],this['InfinityPoint']={'x':this['oriX']+this['tmp_cossin'][0x0]*0x186a0,'y':this['oriY']+this['tmp_cossin'][0x1]*0x186a0},this['getCrossPoints'](),oMiniGames['oZuma']['OtherUpdates']['add'](this),this;},'Paint'(){oMiniGames['oZuma']['context']['fillStyle']=['red','green'][this['color']],oMiniGames['oZuma']['context']['fillRect'](this['x']-this['r'],this['y']-this['r'],0x2*this['r'],0x2*this['r']);},'getCrossPoints'(){let g=this,c={'x':g['oriX'],'y':g['oriY']};g['crossPoints']=[],g['checkTimes']=[];function w(I,Q,k){return oMiniGames['oZuma']['LineIntersect'](c,g['InfinityPoint'],oMiniGames['oZuma']['AddVector'](I,k),oMiniGames['oZuma']['SubVector'](Q,k))||oMiniGames['oZuma']['LineIntersect'](c,g['InfinityPoint'],oMiniGames['oZuma']['SubVector'](I,k),oMiniGames['oZuma']['AddVector'](Q,k));}for(let I in oMiniGames['oZuma']['Samples']){let Q=oMiniGames['oZuma']['Samples'][I],k=Q['length'],f,G;for(let z=0x0;z<k-0x1;z++){f=Object['assign']({},Q[z]),G=Object['assign']({},Q[z+0x1]);let e=Math['atan2'](G['y']-f['y'],G['x']-f['x']),X=[Math['cos'](e),Math['sin'](e)];f['x']-=X[0x0]*g['r']*0x2,f['y']-=X[0x1]*g['r']*0x2,G['x']+=X[0x0]*g['r']*0x2,G['y']+=X[0x1]*g['r']*0x2;let F={'x':-X[0x1]*g['r']*1.42,'y':X[0x0]*g['r']*1.42};if(w(f,G,F)){let H=[oMiniGames['oZuma']['GetCrossPoint'](c,g['InfinityPoint'],f,G),null,I,e-g['angle']];H[0x1]=[null,oMiniGames['oZuma']['distancePrefixSumArr'][I][z]-Math['hypot'](H[0x0]['x']-Q[z+0x1]['x'],H[0x0]['y']-Q[z+0x1]['y'])],Math['abs'](Math['abs']((e-g['angle'])%Math['PI'])-1.5707963267948966)<0.01?H[0x1][0x0]=H[0x1][0x1]-Math['sign'](X[0x1]*g['tmp_cossin'][0x1]+X[0x0]*g['tmp_cossin'][0x0])*Math['abs'](Math['tan'](e-g['angle']))*0x2*g['r']:H[0x1][0x0]=H[0x1][0x1],H[0x1][0x2]=H[0x1][0x1]-H[0x1][0x0]+H[0x1][0x1],g['crossPoints']['push'](H);}}}g['crossPoints']['forEach'](W=>{let x=W[0x0],r=Math['max'](0.01,W[0x3]%(Math['PI']!=0x0?Math['abs'](0x2*g['r']/Math['sin'](W[0x3])):Infinity)),t=Math['max'](0x0,Math['hypot'](x['x']-g['oriX'],x['y']-g['oriY'])-r),U=t/g['speed'],u=(t+0x2*r)/g['speed'];g['checkTimes']['push']([U,u,W[0x1],W[0x2]]);}),g['checkTimes']['sort'](function(W,x){return W[0x0]-x[0x0];});},'Update'(g){this['Move'](g),this['Paint'](),this['speed']*this['liveTime']>0x3e8&&this['Destroy']();},'Move'(g){let i=this,c=i['x'],w=i['y'];i['liveTime']+=g,i['x']=i['oriX']+i['tmp_cossin'][0x0]*i['speed']*i['liveTime'],i['y']=i['oriY']+i['tmp_cossin'][0x1]*i['speed']*i['liveTime'];let I={'x':c,'y':w},Q={'x':i['x'],'y':i['y']},k={'x':i['oriX'],'y':i['oriY']},f=i['checkTimes']['length'],G=i['chkIndex'];while(i['chkIndex']<f&&i['liveTime']>=i['checkTimes'][i['chkIndex']][0x0]){let z=Math['Lerp'](i['checkTimes'][i['chkIndex']][0x2][0x0],i['checkTimes'][i['chkIndex']][0x2][0x2],(i['liveTime']-i['checkTimes'][i['chkIndex']][0x0])/(i['checkTimes'][i['chkIndex']][0x1]-i['checkTimes'][i['chkIndex']][0x0])),e=oMiniGames['oZuma']['BallHeads'][i['checkTimes'][i['chkIndex']][0x3]];while(e){if((!e['nextBall']||e['nextBall']['ballObj']['s']>=z)&&e['ballObj']['s']<=z){if(e['ballObj']['CheckCollide'](Q)){i['insertFront'](e);return;}else{if(e['nextBall']&&e['nextBall']['ballObj']['CheckCollide'](Q)){i['insertBack'](e['nextBall']);return;}}}else{if(!e['lastBall']&&e['ballObj']['s']<z){if(e['ballObj']['CheckCollide'](Q)){i['insertHead'](e);return;}}}e=e['nextBall'];}i['checkTimes']>i['checkTimes'][i['chkIndex']][0x1]&&(G=i['chkIndex']+0x1),i['chkIndex']++;}i['chkIndex']=G;},'insertHead'(g){console['log']('head!');let i=new oMiniGames['oZuma']['Obj']['Ball']()['Birth'](g['ballObj']['s']-0.01,null,g,this['color'],g['ballObj']['lane'])['insertAnimation']();i['insertOriPos']={'x':this['x'],'y':this['y']},this['Destroy']();},'insertFront'(g){console['log']('front!',g,g['ballObj']['s']);let i=new oMiniGames['oZuma']['Obj']['Ball']()['Birth'](g['ballObj']['s']+0.01,g,g['nextBall'],this['color'],g['ballObj']['lane'])['insertAnimation']();i['insertOriPos']={'x':this['x'],'y':this['y']},this['Destroy']();},'insertBack'(g){console['log']('back!',g,g['ballObj']['s']);let i=new oMiniGames['oZuma']['Obj']['Ball']()['Birth'](g['ballObj']['s']-0.01,g['lastBall'],g,this['color'],g['ballObj']['lane'])['insertAnimation']();i['insertOriPos']={'x':this['x'],'y':this['y']},this['Destroy']();},'Destroy'(){oMiniGames['oZuma']['OtherUpdates']['delete'](this);}}),'Shooter':NewO({'nowBallColor':null,'nextBallColor':null,'ang':0x0,'Birth'(g,i){this['x']=g,this['y']=i,this['setColor'](),this['register'](),oMiniGames['oZuma']['OtherUpdates']['add'](this);},'Update'(){oMiniGames['oZuma']['context']['fillStyle']=['red','green'][this['nowBallColor']],oMiniGames['oZuma']['context']['fillRect'](this['x']-0x14,this['y']-0x14,0x28,0x28),oMiniGames['oZuma']['context']['fillStyle']=['red','green'][this['nextBallColor']],oMiniGames['oZuma']['context']['fillRect'](this['x']-0xa,this['y']-0xa,0x14,0x14);},'setColor'(){!this['nowBallColor']&&(this['nowBallColor']=Math['floor'](Math['random']()*oMiniGames['oZuma']['colorCount'])),!this['nextBallColor']&&(this['nextBallColor']=Math['floor'](Math['random']()*oMiniGames['oZuma']['colorCount']));},'register'(){let g=this;oMiniGames['oZuma']['canvas']['addEventListenerRecord']('mousemove',i=>{g['CheckMove'](i);}),oMiniGames['oZuma']['canvas']['addEventListenerRecord']('mousedown',i=>{g['CheckMove'](i),i['button']===0x0?g['ShootBall']():(g['swapBall'](),i['preventDefault']());}),oMiniGames['oZuma']['canvas']['addEventListenerRecord']('contextmenu',i=>{i['preventDefault']();});},'swapBall'(){this['nowBallColor']^=this['nextBallColor'],this['nextBallColor']^=this['nowBallColor'],this['nowBallColor']^=this['nextBallColor'];},'CheckMove'(g){this['ang']=Math['atan2'](g['offsetY']-this['y'],g['offsetX']-this['x']);},'ShootBall'(){new oMiniGames['oZuma']['Obj']['BallShooted']()['Birth'](this['x'],this['y'],this['ang'],this['nowBallColor']),this['nowBallColor']=this['nextBallColor'],this['nextBallColor']=null,this['setColor']();}})}}};(function(g){let i,c=e=>{let X=oGd['$'],{R:F,C:H,PKind:W}=e,x=F,r=H,t=F,U=H,u=e['constructor'],O=[],D=[],V;while(((Z=V=X[--x+'_'+H+'_'+W])===null||Z===void 0x0?void 0x0:Z['constructor'])===u&&V['HP']>0x0){var Z;O['push'](V);}O['reverse']();while(((J=V=X[F+'_'+--r+'_'+W])===null||J===void 0x0?void 0x0:J['constructor'])===u&&V['HP']>0x0){var J;D['push'](V);}D['reverse']();while(((d=V=X[++t+'_'+H+'_'+W])===null||d===void 0x0?void 0x0:d['constructor'])===u&&V['HP']>0x0){var d;O['push'](V);}while(((y=V=X[F+'_'+ ++U+'_'+W])===null||y===void 0x0?void 0x0:y['constructor'])===u&&V['HP']>0x0){var y;D['push'](V);}return x++,t--,r++,U--,{'top':x,'bottom':t,'left':r,'right':U,'RArr':O,'CArr':D};},w=(e,X,F)=>{let H=GetX(F)+0x2d,W=GetY(X)-0x32,x=0x0,r=e['IsCard'],t;for(let U of e){if(typeof U==='number'){while(U>0x32&&x<0x3){++x,AppearSun(H,W,0x32,0x0),U-=0x32;}U>0x0&&AppearSun(H,W,U,0x0);}else{let[u]=GetAP(GetX(F),GetY(X),X,F);r||!U['prototype']['CanGrow'](u,X,F)?(t=ThrowACard(U,[H-0x64,W-0x1e],![],{'countdown':0x5dc,'delta':0x1e}),i['CreateCard']&&i['CreateCard'](t)):CustomSpecial(U,X,F);}}},I=(e,F,H,W=0.75,x=()=>{})=>{if(!$P[e['id']])return![];const r=e['Ele'];e['Die']('JNG_TICKET_SuperPower',![]),oGd['$'][e['R']+'_'+e['C']+'_'+e['PKind']]=e,oEffects['Animate'](r,{'left':F+'px','top':H+'px'},W/oSym['NowSpeed'],'ease-in-out',()=>{ClearChild(r),IsHttpEnvi&&e['RemoveDynamicPic'](e),delete oGd['$'][e['R']+'_'+e['C']+'_'+e['PKind']];});},Q=e=>{var X;let F=e['Type'],H=(X=e['Num'])!==null&&X!==void 0x0?X:0x1,W=e['Kind'],x=[];switch(F){case'CRand':while(H--){x['push'](W['random']());}x['IsCard']=!![];return x;case'CAll':while(H--){x['push'](...W);}x['IsCard']=!![];return x;case'PRand':while(H--){x['push'](W['random']());}return x;case'PAll':while(H--){x['push'](...W);}return x;case'ASun':return[e['Num']];default:return[e];}},k=(e,X,F,H,W)=>{let x=i[e],r=Q(x),t=i['DoubleRule'](e,r,x,X,Q);w(t,F,H);},f=e=>{if(!i[e['EName']])return 0x0;let{R:X,C:F,PKind:H}=e,W=c(e),x=W['bottom']-W['top']+0x1,r=W['right']-W['left']+0x1,t=x+r-0x1;if(x>=0x3||r>=0x3){i['BeforeCollapse']&&i['BeforeCollapse'](W);if(x>=0x3)for(let U of W['RArr']){I(U,e['pixelLeft'],e['pixelTop'],0.75);}if(r>=0x3)for(let u of W['CArr']){I(u,e['pixelLeft'],e['pixelTop'],0.75);}oSym['addTask'](0x64,()=>{e['Die']('JNG_TICKET_SuperPower');if(x>0x4||r>0x4)oAudioManager['playAudio']('match_3');else x>0x3||r>0x3?oAudioManager['playAudio']('match_2'):oAudioManager['playAudio']('match');let D=Math['random'](),V=NewImg('stars_'+D,null,'left:'+(F*0x50+0xa)+'px;top:'+(X*0x64-0x46)+'px;transform:scale(1);z-index:1000;pointer-events:none',EDPZ);V['src']=oDynamicPic['require']('images/Plants/stars.webp',V),oSym['addTask'](0x64*oSym['NowSpeed'],Z=>{ClearChild(V);}),k(e['EName'],t,X,F,H);});}return t;};function G(e){let X=e['id'],F=window[e['dataset']['jngConstructor']];if(!F)return;let H=$P[X];H&&!H['Tools']&&H['isPlant']&&f(H);}const z=e=>{IsGaming(0x1)&&e['forEach'](X=>{X['addedNodes']['forEach'](G);});};g['PlantCollapse']=(e={})=>{return i=e,new MutationObserver(z)['observe'](EDPZ,{'childList':!![],'subtree':!![]}),{'GetPNum':c,'CreatePlant':w,'MovePlant':I,'DecodeRule':Q,'MoveCallBack':k,'CtkMain':f};};}(oMiniGames));